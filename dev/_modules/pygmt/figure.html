
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>pygmt.figure &mdash; PyGMT</title>
    

      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=a51cd8ab" />

  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://pygmt.org/dev/_modules/pygmt/figure.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=aa3fe5bf"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ccdb6887"></script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <!-- Google Analytics tracking code -->
    <!-- See https://developers.google.com/analytics/devguides/collection/analyticsjs/ for documentation. -->
    <!-- 'storage': 'none' disables cookies -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-38125837-7', 'auto', {'storage': 'none'});
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>

    <!-- Documentation switcher -->
    <!-- Point to the *dev* version switcher. This will allow the latest versions to appear on older documentation. -->
    <script type="text/javascript" src="/dev/_static/version_switch.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href="../../index.html"><h2 class="sidebar-title">PyGMT</h2></a>

    
        
        
            <div class="version">
                dev
            </div>
        
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/index.html">Intro to PyGMT</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projections/index.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../external_resources.html">External Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../techref/index.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../minversions.html">Minimum Supported Versions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../team.html">PyGMT Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintenance.html">Maintainers Guide</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help and contributing</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md"><i class="fa fa-gavel fa-fw"></i> Code of Conduct</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt/blob/main/LICENSE.txt"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org"><i class="fa fa-comment fa-fw"></i> Contact</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyGMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
<div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">pygmt.figure</li>
    <li class="source-link">
        
    </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pygmt.figure</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Define the Figure class that handles all plotting.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span><span class="p">,</span> <span class="n">PurePath</span>
<span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">TemporaryDirectory</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">IPython</span>

    <span class="n">_HAS_IPYTHON</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">_HAS_IPYTHON</span> <span class="o">=</span> <span class="kc">False</span>


<span class="kn">from</span> <span class="nn">pygmt.clib</span> <span class="kn">import</span> <span class="n">Session</span>
<span class="kn">from</span> <span class="nn">pygmt.exceptions</span> <span class="kn">import</span> <span class="n">GMTError</span><span class="p">,</span> <span class="n">GMTInvalidInput</span>
<span class="kn">from</span> <span class="nn">pygmt.helpers</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">build_arg_list</span><span class="p">,</span>
    <span class="n">fmt_docstring</span><span class="p">,</span>
    <span class="n">kwargs_to_strings</span><span class="p">,</span>
    <span class="n">launch_external_viewer</span><span class="p">,</span>
    <span class="n">unique_name</span><span class="p">,</span>
    <span class="n">use_alias</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">_get_default_display_method</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;external&quot;</span><span class="p">,</span> <span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the default method to display preview images.</span>

<span class="sd">    The function checks the current environment and determines the most suitable method</span>
<span class="sd">    to display preview images when calling :meth:`pygmt.Figure.show`. Valid display</span>
<span class="sd">    methods are:</span>

<span class="sd">    - ``&quot;external&quot;``: External PDF preview using the default PDF viewer</span>
<span class="sd">    - ``&quot;notebook&quot;``: Inline PNG preview in the current notebook</span>
<span class="sd">    - ``&quot;none&quot;``: Disable image preview</span>

<span class="sd">    The default display method is ``&quot;notebook&quot;`` in the Jupyter notebook environment,</span>
<span class="sd">    and ``&quot;external&quot;`` in other cases.</span>

<span class="sd">    Setting environment variable **PYGMT_USE_EXTERNAL_DISPLAY** to ``&quot;false&quot;`` can</span>
<span class="sd">    disable image preview in external viewers. It&#39;s useful when running the tests and</span>
<span class="sd">    building the documentation to avoid popping up windows.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    method</span>
<span class="sd">        The default display method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if an IPython kernel is running.</span>
    <span class="k">if</span> <span class="n">_HAS_IPYTHON</span> <span class="ow">and</span> <span class="p">(</span><span class="n">ipy</span> <span class="o">:=</span> <span class="n">IPython</span><span class="o">.</span><span class="n">get_ipython</span><span class="p">())</span> <span class="ow">and</span> <span class="s2">&quot;IPKernelApp&quot;</span> <span class="ow">in</span> <span class="n">ipy</span><span class="o">.</span><span class="n">config</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;notebook&quot;</span>
    <span class="c1"># Check if the environment variable PYGMT_USE_EXTERNAL_DISPLAY is set to &quot;false&quot;.</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PYGMT_USE_EXTERNAL_DISPLAY&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;false&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;none&quot;</span>
    <span class="c1"># Fallback to using the external viewer.</span>
    <span class="k">return</span> <span class="s2">&quot;external&quot;</span>


<span class="c1"># A registry of all figures that have had &quot;show&quot; called in this session.</span>
<span class="c1"># This is needed for the sphinx-gallery scraper in pygmt/sphinx_gallery.py</span>
<span class="n">SHOWED_FIGURES</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># Configurations for figure display.</span>
<span class="n">SHOW_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">_get_default_display_method</span><span class="p">(),</span>  <span class="c1"># The image preview display method.</span>
<span class="p">}</span>


<div class="viewcode-block" id="Figure">
<a class="viewcode-back" href="../../api/generated/pygmt.Figure.html#pygmt.Figure">[docs]</a>
<span class="k">class</span> <span class="nc">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A GMT figure to handle all plotting.</span>

<span class="sd">    Use the plotting methods of this class to add elements to the figure.  You</span>
<span class="sd">    can preview the figure using :meth:`pygmt.Figure.show` and save the figure</span>
<span class="sd">    to a file using :meth:`pygmt.Figure.savefig`.</span>

<span class="sd">    Unlike traditional GMT figures, no figure file is generated until you call</span>
<span class="sd">    :meth:`pygmt.Figure.savefig` or :meth:`pygmt.Figure.psconvert`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import pygmt</span>
<span class="sd">    &gt;&gt;&gt; fig = pygmt.Figure()</span>
<span class="sd">    &gt;&gt;&gt; fig.basemap(region=[0, 360, -90, 90], projection=&quot;W15c&quot;, frame=True)</span>
<span class="sd">    &gt;&gt;&gt; fig.savefig(&quot;my-figure.png&quot;)</span>
<span class="sd">    &gt;&gt;&gt; # Make sure the figure file is generated and clean it up</span>
<span class="sd">    &gt;&gt;&gt; from pathlib import Path</span>
<span class="sd">    &gt;&gt;&gt; assert Path(&quot;my-figure.png&quot;).exists()</span>
<span class="sd">    &gt;&gt;&gt; Path(&quot;my-figure.png&quot;).unlink()</span>

<span class="sd">    The plot region can be specified through ISO country codes (for example,</span>
<span class="sd">    ``&quot;JP&quot;`` for Japan):</span>

<span class="sd">    &gt;&gt;&gt; import pygmt</span>
<span class="sd">    &gt;&gt;&gt; fig = pygmt.Figure()</span>
<span class="sd">    &gt;&gt;&gt; fig.basemap(region=&quot;JP&quot;, projection=&quot;M7c&quot;, frame=True)</span>
<span class="sd">    &gt;&gt;&gt; # The fig.region attribute shows the WESN bounding box for the figure</span>
<span class="sd">    &gt;&gt;&gt; print(&quot;, &quot;.join(f&quot;{i:.2f}&quot; for i in fig.region))</span>
<span class="sd">    122.94, 145.82, 20.53, 45.52</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">unique_name</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_preview_dir</span> <span class="o">=</span> <span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">}</span><span class="s2">-preview-&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_activate_figure</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clean up the temporary directory that stores the previews.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_preview_dir&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_preview_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_activate_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start and/or activate the current figure.</span>

<span class="sd">        All plotting commands run afterward will append to this figure.</span>

<span class="sd">        Unlike the command-line version (``gmt figure``), this method does not</span>
<span class="sd">        trigger the generation of a figure file. An explicit call to</span>
<span class="sd">        :meth:`pygmt.Figure.savefig` or :meth:`pygmt.Figure.psconvert` must be</span>
<span class="sd">        made in order to get a file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Passing format &#39;-&#39; tells pygmt.end to not produce any files.</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="s2">&quot;figure&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">fmt</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_preprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call the ``figure`` module before each plotting command to ensure we&#39;re plotting</span>
<span class="sd">        to this particular figure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_activate_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">kwargs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">region</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The geographic WESN bounding box for the current figure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_activate_figure</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">wesn</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">extract_region</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">wesn</span>

<div class="viewcode-block" id="Figure.psconvert">
<a class="viewcode-back" href="../../api/generated/pygmt.Figure.psconvert.html#pygmt.Figure.psconvert">[docs]</a>
    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span>
        <span class="n">A</span><span class="o">=</span><span class="s2">&quot;crop&quot;</span><span class="p">,</span>
        <span class="n">C</span><span class="o">=</span><span class="s2">&quot;gs_option&quot;</span><span class="p">,</span>
        <span class="n">E</span><span class="o">=</span><span class="s2">&quot;dpi&quot;</span><span class="p">,</span>
        <span class="n">F</span><span class="o">=</span><span class="s2">&quot;prefix&quot;</span><span class="p">,</span>
        <span class="n">G</span><span class="o">=</span><span class="s2">&quot;gs_path&quot;</span><span class="p">,</span>
        <span class="n">I</span><span class="o">=</span><span class="s2">&quot;resize&quot;</span><span class="p">,</span>
        <span class="n">N</span><span class="o">=</span><span class="s2">&quot;bb_style&quot;</span><span class="p">,</span>
        <span class="n">T</span><span class="o">=</span><span class="s2">&quot;fmt&quot;</span><span class="p">,</span>
        <span class="n">Q</span><span class="o">=</span><span class="s2">&quot;anti_aliasing&quot;</span><span class="p">,</span>
        <span class="n">V</span><span class="o">=</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">psconvert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert [E]PS file(s) to other formats.</span>

<span class="sd">        Converts one or more PostScript files to other formats (BMP, EPS, JPEG,</span>
<span class="sd">        PDF, PNG, PPM, TIFF) using Ghostscript.</span>

<span class="sd">        If no input files are given, will convert the current active figure</span>
<span class="sd">        (see :class:`pygmt.Figure`). In this case, an output name must be given</span>
<span class="sd">        using parameter ``prefix``.</span>

<span class="sd">        Full option list at :gmt-docs:`psconvert.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        crop : str or bool</span>
<span class="sd">            Adjust the BoundingBox and HiResBoundingBox to the minimum</span>
<span class="sd">            required by the image content. Default is True. Append **+u** to</span>
<span class="sd">            first remove any GMT-produced time-stamps. Append **+r** to</span>
<span class="sd">            *round* the HighResBoundingBox instead of using the ``ceil``</span>
<span class="sd">            function. This is going against Adobe Law but can be useful when</span>
<span class="sd">            creating very small images where the difference of one pixel</span>
<span class="sd">            might matter. If ``verbose`` is used we also report the</span>
<span class="sd">            dimensions of the final illustration.</span>
<span class="sd">        gs_path : str</span>
<span class="sd">            Full path to the Ghostscript executable.</span>
<span class="sd">        gs_option : str</span>
<span class="sd">            Specify a single, custom option that will be passed on to</span>
<span class="sd">            Ghostscript as is.</span>
<span class="sd">        dpi : int</span>
<span class="sd">            Set raster resolution in dpi. Default is 720 for PDF, 300 for</span>
<span class="sd">            others.</span>
<span class="sd">        prefix : str</span>
<span class="sd">            Force the output file name. By default output names are constructed</span>
<span class="sd">            using the input names as base, which are appended with an</span>
<span class="sd">            appropriate extension. Use this option to provide a different name,</span>
<span class="sd">            but without extension. Extension is still determined automatically.</span>
<span class="sd">        resize : str</span>
<span class="sd">            [**+m**\ *margins*][**+s**\ [**m**]\ *width*\</span>
<span class="sd">            [/\ *height*]][**+S**\ *scale*].</span>
<span class="sd">            Adjust the BoundingBox and HiResBoundingBox by scaling and/or</span>
<span class="sd">            adding margins. Append **+m** to specify extra margins to extend</span>
<span class="sd">            the bounding box. Give either one (uniform), two (x and y) or four</span>
<span class="sd">            (individual sides) margins; append unit [Default is set by</span>
<span class="sd">            :gmt-term:`PROJ_LENGTH_UNIT`]. Append **+s**\ *width* to resize the</span>
<span class="sd">            output image to exactly *width* units. The default unit is set by</span>
<span class="sd">            :gmt-term:`PROJ_LENGTH_UNIT` but you can append a new unit and/or</span>
<span class="sd">            impose different width and height (**Note**: This may change the</span>
<span class="sd">            image aspect ratio). What happens here is that Ghostscript will do</span>
<span class="sd">            the re-interpolation work and the final image will retain the DPI</span>
<span class="sd">            resolution set by ``dpi``.  Append **+sm** to set a maximum size</span>
<span class="sd">            and the new *width* is only imposed if the original figure width</span>
<span class="sd">            exceeds it. Append /\ *height* to also impose a maximum height in</span>
<span class="sd">            addition to the width. Alternatively, append **+S**\ *scale* to</span>
<span class="sd">            scale the image by a constant factor.</span>
<span class="sd">        bb_style : str</span>
<span class="sd">            Set optional BoundingBox fill color, fading, or draw the outline</span>
<span class="sd">            of the BoundingBox. Append **+f**\ *fade* to fade the entire plot</span>
<span class="sd">            towards black (100%) [no fading, 0]. Append **+g**\ *paint* to</span>
<span class="sd">            paint the BoundingBox behind the illustration and append **+p**\</span>
<span class="sd">            [*pen*] to draw the BoundingBox outline (append a pen or accept</span>
<span class="sd">            the default pen of 0.25p,black). **Note**: If both **+g** and</span>
<span class="sd">            **+f** are used then we use paint as the fade color instead of</span>
<span class="sd">            black. Append **+i** to enforce gray-shades by using ICC profiles.</span>
<span class="sd">        anti_aliasing : str</span>
<span class="sd">            [**g**\|\ **p**\|\ **t**\][**1**\|\ **2**\|\ **4**].</span>
<span class="sd">            Set the anti-aliasing options for **g**\ raphics or **t**\ ext.</span>
<span class="sd">            Append the size of the subsample box (1, 2, or 4) [Default is</span>
<span class="sd">            ``&quot;4&quot;``]. [Default is no anti-aliasing (same as bits = 1).]</span>
<span class="sd">        fmt : str</span>
<span class="sd">            Set the output format, where **b** means BMP, **e** means EPS,</span>
<span class="sd">            **E** means EPS with PageSize command, **f** means PDF, **F** means</span>
<span class="sd">            multi-page PDF, **j** means JPEG, **g** means PNG, **G** means</span>
<span class="sd">            transparent PNG (untouched regions are transparent), **m** means</span>
<span class="sd">            PPM, and **t** means TIFF [Default is JPEG]. To</span>
<span class="sd">            **b**\|\ **j**\|\ **g**\|\ **t**\ , optionally append **+m** in</span>
<span class="sd">            order to get a monochrome (grayscale) image. The EPS format can be</span>
<span class="sd">            combined with any of the other formats. For example, **ef** creates</span>
<span class="sd">            both an EPS and a PDF file. Using **F** creates a multi-page PDF</span>
<span class="sd">            file from the list of input PS or PDF files. It requires the</span>
<span class="sd">            ``prefix`` parameter.</span>
<span class="sd">        {verbose}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># pytest-mpl v0.17.0 added the &quot;metadata&quot; parameter to `Figure.savefig`, which</span>
        <span class="c1"># is not recognized. So remove it before calling `Figure.psconvert`.</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="c1"># Default cropping the figure to True</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="n">prefix</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                <span class="s2">&quot;The &#39;prefix&#39; parameter must be specified with a valid value.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># check if the parent directory exists</span>
        <span class="n">prefix_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No such directory: &#39;</span><span class="si">{</span><span class="n">prefix_path</span><span class="si">}</span><span class="s2">&#39;, please create it first.&quot;</span>
            <span class="p">)</span>

        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="s2">&quot;psconvert&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">build_arg_list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span></div>


<div class="viewcode-block" id="Figure.savefig">
<a class="viewcode-back" href="../../api/generated/pygmt.Figure.savefig.html#pygmt.Figure.savefig">[docs]</a>
    <span class="k">def</span> <span class="nf">savefig</span><span class="p">(</span>  <span class="c1"># noqa: PLR0912</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">fname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">PurePath</span><span class="p">,</span>
        <span class="n">transparent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">crop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">anti_alias</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">worldfile</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the figure to an image file.</span>

<span class="sd">        Supported image formats and their extensions:</span>

<span class="sd">        **Raster image formats**</span>

<span class="sd">        - BMP (``.bmp``)</span>
<span class="sd">        - JPEG (``.jpg`` or ``.jpeg``)</span>
<span class="sd">        - GeoTIFF (``.tiff``)</span>
<span class="sd">        - PNG (``.png``)</span>
<span class="sd">        - PPM (``.ppm``)</span>
<span class="sd">        - TIFF (``.tif``)</span>

<span class="sd">        **Vector image formats**</span>

<span class="sd">        - EPS (``.eps``)</span>
<span class="sd">        - PDF (``.pdf``)</span>

<span class="sd">        Besides the above formats, you can also save the figure to a KML file</span>
<span class="sd">        (``.kml``), with a companion PNG file generated automatically. The KML file can</span>
<span class="sd">        be viewed in Google Earth.</span>

<span class="sd">        You can pass in any keyword arguments that :meth:`pygmt.Figure.psconvert`</span>
<span class="sd">        accepts.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fname</span>
<span class="sd">            The desired figure file name, including the extension. See the list of</span>
<span class="sd">            supported formats and their extensions above.</span>
<span class="sd">        transparent</span>
<span class="sd">            Use a transparent background for the figure. Only valid for PNG format.</span>
<span class="sd">        crop</span>
<span class="sd">            Crop the figure canvas (page) to the plot area.</span>
<span class="sd">        anti_alias</span>
<span class="sd">            Use anti-aliasing when creating raster images. Ignored if creating vector</span>
<span class="sd">            images. More specifically, it passes the arguments ``&quot;t2&quot;`` and ``&quot;g2&quot;`` to</span>
<span class="sd">            the ``anti_aliasing`` parameter of :meth:`pygmt.Figure.psconvert`.</span>
<span class="sd">        show</span>
<span class="sd">            Display the figure in an external viewer.</span>
<span class="sd">        worldfile</span>
<span class="sd">            Create a companion `world file &lt;https://en.wikipedia.org/wiki/World_file&gt;`__</span>
<span class="sd">            for the figure. The world file will have the same name as the figure file</span>
<span class="sd">            but with different extension (e.g., ``.tfw`` for ``.tif``). See</span>
<span class="sd">            https://en.wikipedia.org/wiki/World_file#Filename_extension for the</span>
<span class="sd">            convention of world file extensions. This parameter only works for raster</span>
<span class="sd">            image formats (except GeoTIFF).</span>
<span class="sd">        **kwargs : dict</span>
<span class="sd">            Additional keyword arguments passed to :meth:`pygmt.Figure.psconvert`. Valid</span>
<span class="sd">            parameters are ``dpi``, ``gs_path``, ``gs_option``, ``resize``,</span>
<span class="sd">            ``bb_style``, and ``verbose``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># All supported formats</span>
        <span class="n">fmts</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;bmp&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span>
            <span class="s2">&quot;eps&quot;</span><span class="p">:</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span>
            <span class="s2">&quot;jpg&quot;</span><span class="p">:</span> <span class="s2">&quot;j&quot;</span><span class="p">,</span>
            <span class="s2">&quot;kml&quot;</span><span class="p">:</span> <span class="s2">&quot;g&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pdf&quot;</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;png&quot;</span><span class="p">:</span> <span class="s2">&quot;g&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ppm&quot;</span><span class="p">:</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tif&quot;</span><span class="p">:</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tiff&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># GeoTIFF doesn&#39;t need the -T option</span>
        <span class="p">}</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
        <span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="n">fname</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span> <span class="n">fname</span><span class="o">.</span><span class="n">suffix</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">suffix</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>  <span class="c1"># Remove the . and normalize to lowercase</span>

        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">:</span>  <span class="c1"># Alias jpeg to jpg</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="s2">&quot;jpg&quot;</span>
        <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;tiff&quot;</span><span class="p">:</span>  <span class="c1"># GeoTIFF</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;W&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;+g&quot;</span>
        <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;kml&quot;</span><span class="p">:</span>  <span class="c1"># KML</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;W&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;+k&quot;</span>

        <span class="k">if</span> <span class="n">ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fmts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;ps&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                    <span class="s2">&quot;Extension &#39;.ps&#39; is not supported. &quot;</span>
                    <span class="s2">&quot;Please use &#39;.eps&#39; or &#39;.pdf&#39; instead.&quot;</span>
                <span class="p">)</span>
            <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown extension &#39;.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmts</span><span class="p">[</span><span class="n">ext</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fmt</span> <span class="o">!=</span> <span class="s2">&quot;g&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Transparency unavailable for &#39;</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&#39;, only for png.&quot;</span>
                <span class="p">)</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">anti_alias</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;Qt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;Qg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="n">worldfile</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="s2">&quot;kml&quot;</span><span class="p">,</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;tiff&quot;</span><span class="p">}:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Saving a world file is not supported for &#39;</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&#39; format.&quot;</span>
                <span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;W&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">psconvert</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="n">crop</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Remove the .pgw world file if exists</span>
        <span class="c1"># Not necessary after GMT 6.5.0.</span>
        <span class="c1"># See upstream fix https://github.com/GenericMappingTools/gmt/pull/7865</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;tiff&quot;</span><span class="p">:</span>
            <span class="n">fname</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s2">&quot;.pgw&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Rename if file extension doesn&#39;t match the input file suffix</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="o">!=</span> <span class="n">suffix</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">fname</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">ext</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">launch_external_viewer</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fname</span><span class="p">))</span></div>


<div class="viewcode-block" id="Figure.show">
<a class="viewcode-back" href="../../api/generated/pygmt.Figure.show.html#pygmt.Figure.show">[docs]</a>
    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;external&quot;</span><span class="p">,</span> <span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
        <span class="n">waiting</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display a preview of the figure.</span>

<span class="sd">        Inserts the preview in the Jupyter notebook output if available, otherwise opens</span>
<span class="sd">        it in the default viewer for your operating system (falls back to the default</span>
<span class="sd">        web browser).</span>

<span class="sd">        Use :func:`pygmt.set_display` to select the default display method</span>
<span class="sd">        (``&quot;notebook&quot;``, ``&quot;external&quot;``, ``&quot;none&quot;`` or ``None``).</span>

<span class="sd">        The ``method`` parameter allows to override the default display method for the</span>
<span class="sd">        current figure. The parameters ``dpi`` and ``width`` can be used to control the</span>
<span class="sd">        resolution and dimension of the figure in the notebook.</span>

<span class="sd">        The external viewer can be disabled by setting the environment variable</span>
<span class="sd">        **PYGMT_USE_EXTERNAL_DISPLAY** to ``&quot;false&quot;``. This is useful when running tests</span>
<span class="sd">        and building the documentation to avoid popping up windows.</span>

<span class="sd">        The external viewer does not block the current process, thus it&#39;s necessary to</span>
<span class="sd">        suspend the execution of the current process for a short while after launching</span>
<span class="sd">        the external viewer, so that the preview image won&#39;t be deleted before the</span>
<span class="sd">        external viewer tries to open it. Set the ``waiting`` parameter to a larger</span>
<span class="sd">        number if the image viewer on your computer is slow to open the figure.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        method</span>
<span class="sd">            The method to display the current image preview. Choose from:</span>

<span class="sd">            - ``&quot;external&quot;``: External PDF preview using the default PDF viewer</span>
<span class="sd">            - ``&quot;notebook&quot;``: Inline PNG preview in the current notebook</span>
<span class="sd">            - ``&quot;none&quot;``: Disable image preview</span>
<span class="sd">            - ``None``: Reset to the default display method</span>

<span class="sd">            The default display method is ``&quot;external&quot;`` in Python consoles and</span>
<span class="sd">            ``&quot;notebook&quot;`` in Jupyter notebooks, but can be changed by</span>
<span class="sd">            :func:`pygmt.set_display`.</span>

<span class="sd">        dpi</span>
<span class="sd">            The image resolution (dots per inch) in Jupyter notebooks.</span>
<span class="sd">        width</span>
<span class="sd">            The image width (in pixels) in Jupyter notebooks.</span>
<span class="sd">        waiting</span>
<span class="sd">            Suspend the execution of the current process for a given number of seconds</span>
<span class="sd">            after launching an external viewer. Only works if ``method=&quot;external&quot;``.</span>
<span class="sd">        **kwargs : dict</span>
<span class="sd">            Additional keyword arguments passed to :meth:`pygmt.Figure.psconvert`. Valid</span>
<span class="sd">            parameters are ``gs_path``, ``gs_option``, ``resize``, ``bb_style``, and</span>
<span class="sd">            ``verbose``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Module level variable to know which figures had their show method called.</span>
        <span class="c1"># Needed for the sphinx-gallery scraper.</span>
        <span class="n">SHOWED_FIGURES</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Set the display method</span>
        <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">method</span> <span class="o">=</span> <span class="n">SHOW_CONFIG</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span>

        <span class="k">match</span> <span class="n">method</span><span class="p">:</span>
            <span class="k">case</span> <span class="s2">&quot;notebook&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">_HAS_IPYTHON</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">GMTError</span><span class="p">(</span>
                        <span class="s2">&quot;Notebook display is selected, but IPython is not available. &quot;</span>
                        <span class="s2">&quot;Make sure you have IPython installed, &quot;</span>
                        <span class="s2">&quot;or run the script in a Jupyter notebook.&quot;</span>
                    <span class="p">)</span>
                <span class="n">png</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preview</span><span class="p">(</span>
                    <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_bytes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
                <span class="p">)</span>
                <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">png</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">))</span>
            <span class="k">case</span> <span class="s2">&quot;external&quot;</span><span class="p">:</span>
                <span class="n">pdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preview</span><span class="p">(</span>
                    <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">as_bytes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
                <span class="p">)</span>
                <span class="n">launch_external_viewer</span><span class="p">(</span><span class="n">pdf</span><span class="p">,</span> <span class="n">waiting</span><span class="o">=</span><span class="n">waiting</span><span class="p">)</span>
            <span class="k">case</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Do nothing</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid display method &#39;</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&#39;. Valid values are &#39;external&#39;, &quot;</span>
                    <span class="s2">&quot;&#39;notebook&#39;, &#39;none&#39; or None.&quot;</span>
                <span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_preview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">dpi</span><span class="p">,</span> <span class="n">as_bytes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Grab a preview of the figure.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fmt : str</span>
<span class="sd">            The image format. Can be any extension that</span>
<span class="sd">            :meth:`pygmt.Figure.savefig` recognizes.</span>
<span class="sd">        dpi : int</span>
<span class="sd">            The image resolution (dots per inch).</span>
<span class="sd">        as_bytes : bool</span>
<span class="sd">            If ``True``, will load the image as a bytes string and return that</span>
<span class="sd">            instead of the file name.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        preview : str or bytes</span>
<span class="sd">            If ``as_bytes=False``, this is the file name of the preview image</span>
<span class="sd">            file. Else, it is the file content loaded as a bytes string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fname</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preview_dir</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">as_bytes</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">fname</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">fname</span>

    <span class="k">def</span> <span class="nf">_repr_png_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show a PNG preview if the object is returned in an interactive shell.</span>

<span class="sd">        For the Jupyter notebook or IPython Qt console.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">png</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preview</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_bytes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">png</span>

    <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show the PNG image embedded in HTML with a controlled width.</span>

<span class="sd">        Looks better than the raw PNG.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">raw_png</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preview</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_bytes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">base64_png</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">encodebytes</span><span class="p">(</span><span class="n">raw_png</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;img src=&quot;data:image/png;base64,</span><span class="si">{image}</span><span class="s1">&quot; width=&quot;</span><span class="si">{width}</span><span class="s1">px&quot;&gt;&#39;</span>
        <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">base64_png</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

    <span class="kn">from</span> <span class="nn">pygmt.src</span> <span class="kn">import</span> <span class="p">(</span>  <span class="c1"># type: ignore [misc]</span>
        <span class="n">basemap</span><span class="p">,</span>
        <span class="n">coast</span><span class="p">,</span>
        <span class="n">colorbar</span><span class="p">,</span>
        <span class="n">contour</span><span class="p">,</span>
        <span class="n">grdcontour</span><span class="p">,</span>
        <span class="n">grdimage</span><span class="p">,</span>
        <span class="n">grdview</span><span class="p">,</span>
        <span class="n">histogram</span><span class="p">,</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="n">inset</span><span class="p">,</span>
        <span class="n">legend</span><span class="p">,</span>
        <span class="n">logo</span><span class="p">,</span>
        <span class="n">meca</span><span class="p">,</span>
        <span class="n">plot</span><span class="p">,</span>
        <span class="n">plot3d</span><span class="p">,</span>
        <span class="n">rose</span><span class="p">,</span>
        <span class="n">set_panel</span><span class="p">,</span>
        <span class="n">shift_origin</span><span class="p">,</span>
        <span class="n">solar</span><span class="p">,</span>
        <span class="n">subplot</span><span class="p">,</span>
        <span class="n">ternary</span><span class="p">,</span>
        <span class="n">text</span><span class="p">,</span>
        <span class="n">tilemap</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="p">,</span>
        <span class="n">velo</span><span class="p">,</span>
        <span class="n">wiggle</span><span class="p">,</span>
    <span class="p">)</span></div>



<div class="viewcode-block" id="set_display">
<a class="viewcode-back" href="../../api/generated/pygmt.set_display.html#pygmt.set_display">[docs]</a>
<span class="k">def</span> <span class="nf">set_display</span><span class="p">(</span><span class="n">method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;external&quot;</span><span class="p">,</span> <span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the display method when calling :meth:`pygmt.Figure.show`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    method</span>
<span class="sd">        The method to display an image preview. Choose from:</span>

<span class="sd">        - ``&quot;external&quot;``: External PDF preview using the default PDF viewer</span>
<span class="sd">        - ``&quot;notebook&quot;``: Inline PNG preview in the current notebook</span>
<span class="sd">        - ``&quot;none&quot;``: Disable image preview</span>
<span class="sd">        - ``None``: Reset to the default display method, which is either ``&quot;external&quot;``</span>
<span class="sd">          in Python consoles or ``&quot;notebook&quot;`` in Jupyter notebooks.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Let&#39;s assume that you&#39;re using a Jupyter Notebook:</span>

<span class="sd">    &gt;&gt;&gt; import pygmt</span>
<span class="sd">    &gt;&gt;&gt; fig = pygmt.Figure()</span>
<span class="sd">    &gt;&gt;&gt; fig.basemap(region=[0, 10, 0, 10], projection=&quot;X10c/5c&quot;, frame=True)</span>
<span class="sd">    &gt;&gt;&gt; fig.show()  # will display a PNG image in the current notebook</span>
<span class="sd">    &gt;&gt;&gt;</span>
<span class="sd">    &gt;&gt;&gt; # set the display method to &quot;external&quot;</span>
<span class="sd">    &gt;&gt;&gt; pygmt.set_display(method=&quot;external&quot;)  # doctest: +SKIP</span>
<span class="sd">    &gt;&gt;&gt; fig.show()  # will display a PDF image using the default PDF viewer</span>
<span class="sd">    &gt;&gt;&gt;</span>
<span class="sd">    &gt;&gt;&gt; # set the display method to &quot;none&quot;</span>
<span class="sd">    &gt;&gt;&gt; pygmt.set_display(method=&quot;none&quot;)</span>
<span class="sd">    &gt;&gt;&gt; fig.show()  # will not show any image</span>
<span class="sd">    &gt;&gt;&gt;</span>
<span class="sd">    &gt;&gt;&gt; # reset to the default display method</span>
<span class="sd">    &gt;&gt;&gt; pygmt.set_display(method=None)</span>
<span class="sd">    &gt;&gt;&gt; fig.show()  # again, will show a PNG image in the current notebook</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">method</span><span class="p">:</span>
        <span class="k">case</span> <span class="s2">&quot;external&quot;</span> <span class="o">|</span> <span class="s2">&quot;notebook&quot;</span> <span class="o">|</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="n">SHOW_CONFIG</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="k">case</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">SHOW_CONFIG</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_get_default_display_method</span><span class="p">()</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid display method &#39;</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&#39;. Valid values are &#39;external&#39;,&quot;</span>
                <span class="s2">&quot;&#39;notebook&#39;, &#39;none&#39; or None.&quot;</span>
            <span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          
<footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2024, The PyGMT Developers.
      <span class="commit">Revision <code><a href="https://github.com/GenericMappingTools/pygmt/commit/1ff03a3c">1ff03a3c</a></code>.
      </span>
      <span class="lastupdated">Last updated on Sep 05, 2024.
      </span></p>
  </div>

  
<p>
Built with <a href="http://sphinx-doc.org/">Sphinx</a>
using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
provided by <a href="https://readthedocs.org">Read the Docs</a>
</p>
<p>
This website uses Google Analytics to gather usage statistics.
However, it does not use cookies or track you across different websites.
Page view data are used to help us improve the site and provide an estimate of the
software usage.
</p>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>