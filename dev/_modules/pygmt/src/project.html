
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>pygmt.src.project &mdash; PyGMT</title>
    

      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="canonical" href="https://pygmt.org/dev/_modules/pygmt/src/project.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <!-- Google Analytics tracking code -->
    <!-- See https://developers.google.com/analytics/devguides/collection/analyticsjs/ for documentation. -->
    <!-- 'storage': 'none' disables cookies -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-38125837-7', 'auto', {'storage': 'none'});
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>

    <!-- Documentation switcher -->
    <!-- Point to the *dev* version switcher. This will allow the latest versions to appear on older documentation. -->
    <script type="text/javascript" src="/dev/_static/version_switch.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href="../../../index.html"><h2 class="sidebar-title">PyGMT</h2></a>

    
        
        
            <div class="version">
                dev
            </div>
        
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get_started/index.html">Intro to PyGMT</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projections/index.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../external_resources.html">External Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changes.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../team.html">Team Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintenance.html">Maintainers Guide</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help and contributing</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md"><i class="fa fa-gavel fa-fw"></i> Code of Conduct</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt/blob/main/LICENSE.txt"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org"><i class="fa fa-comment fa-fw"></i> Contact</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">PyGMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
<div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../pygmt.html">pygmt</a></li>
      <li class="breadcrumb-item active">pygmt.src.project</li>
    <li class="source-link">
        
    </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pygmt.src.project</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">project - Project data onto lines or great circles, or generate tracks.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pygmt.clib</span> <span class="kn">import</span> <span class="n">Session</span>
<span class="kn">from</span> <span class="nn">pygmt.exceptions</span> <span class="kn">import</span> <span class="n">GMTInvalidInput</span>
<span class="kn">from</span> <span class="nn">pygmt.helpers</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">GMTTempFile</span><span class="p">,</span>
    <span class="n">build_arg_string</span><span class="p">,</span>
    <span class="n">fmt_docstring</span><span class="p">,</span>
    <span class="n">kwargs_to_strings</span><span class="p">,</span>
    <span class="n">use_alias</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="project"><a class="viewcode-back" href="../../../api/generated/pygmt.project.html#pygmt.project">[docs]</a><span class="nd">@fmt_docstring</span>
<span class="nd">@use_alias</span><span class="p">(</span>
    <span class="n">A</span><span class="o">=</span><span class="s2">&quot;azimuth&quot;</span><span class="p">,</span>
    <span class="n">C</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
    <span class="n">E</span><span class="o">=</span><span class="s2">&quot;endpoint&quot;</span><span class="p">,</span>
    <span class="n">F</span><span class="o">=</span><span class="s2">&quot;convention&quot;</span><span class="p">,</span>
    <span class="n">G</span><span class="o">=</span><span class="s2">&quot;generate&quot;</span><span class="p">,</span>
    <span class="n">L</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">,</span>
    <span class="n">N</span><span class="o">=</span><span class="s2">&quot;flat_earth&quot;</span><span class="p">,</span>
    <span class="n">Q</span><span class="o">=</span><span class="s2">&quot;unit&quot;</span><span class="p">,</span>
    <span class="n">S</span><span class="o">=</span><span class="s2">&quot;sort&quot;</span><span class="p">,</span>
    <span class="n">T</span><span class="o">=</span><span class="s2">&quot;pole&quot;</span><span class="p">,</span>
    <span class="n">V</span><span class="o">=</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span>
    <span class="n">W</span><span class="o">=</span><span class="s2">&quot;width&quot;</span><span class="p">,</span>
    <span class="n">Z</span><span class="o">=</span><span class="s2">&quot;ellipse&quot;</span><span class="p">,</span>
    <span class="n">f</span><span class="o">=</span><span class="s2">&quot;coltypes&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">W</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">project</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Project data onto lines or great circles, or generate tracks.</span>

<span class="sd">    Project reads arbitrary :math:`(x, y [, z])` data and returns any</span>
<span class="sd">    combination of :math:`(x, y, z, p, q, r, s)`, where :math:`(p, q)` are the</span>
<span class="sd">    coordinates in the projection, :math:`(r, s)` is the position in the</span>
<span class="sd">    :math:`(x, y)` coordinate system of the point on the profile (:math:`q = 0`</span>
<span class="sd">    path) closest to :math:`(x, y)`, and :math:`z` is all remaining columns in</span>
<span class="sd">    the input (beyond the required :math:`x` and :math:`y` columns).</span>

<span class="sd">    Alternatively, ``project`` may be used to generate</span>
<span class="sd">    :math:`(r, s, p)` triplets at equal increments along a profile using the</span>
<span class="sd">    ``generate`` parameter. In this case, the value of ``data`` is ignored</span>
<span class="sd">    (you can use, e.g., ``data=None``).</span>

<span class="sd">    Projections are defined in any (but only) one of three ways:</span>

<span class="sd">    1. By a ``center`` and an ``azimuth`` in degrees clockwise from North.</span>
<span class="sd">    2. By a ``center`` and ``endpoint`` of the projection path.</span>
<span class="sd">    3. By a ``center`` and a ``pole`` position.</span>

<span class="sd">    To spherically project data along a great circle path, an oblique</span>
<span class="sd">    coordinate system is created which has its equator along that path, and the</span>
<span class="sd">    zero meridian through the Center. Then the oblique longitude (:math:`p`)</span>
<span class="sd">    corresponds to the distance from the Center along the great circle, and the</span>
<span class="sd">    oblique latitude (:math:`q`) corresponds to the distance perpendicular to</span>
<span class="sd">    the great circle path. When moving in the increasing (:math:`p`) direction,</span>
<span class="sd">    (toward B or in the azimuth direction), the positive (:math:`q`) direction</span>
<span class="sd">    is to your left. If a Pole has been specified, then the positive</span>
<span class="sd">    (:math:`q`) direction is toward the pole.</span>

<span class="sd">    To specify an oblique projection, use the ``pole`` parameter to set</span>
<span class="sd">    the pole. Then the equator of the projection is already determined and the</span>
<span class="sd">    ``center`` parameter is used to locate the :math:`p = 0` meridian. The</span>
<span class="sd">    center *cx/cy* will be taken as a point through which the :math:`p = 0`</span>
<span class="sd">    meridian passes. If you do not care to choose a particular point, use the</span>
<span class="sd">    South pole (*cx* = 0, *cy* = -90).</span>

<span class="sd">    Data can be selectively windowed by using the ``length`` and ``width``</span>
<span class="sd">    parameters. If ``width`` is used, the projection width is set to use only</span>
<span class="sd">    data with :math:`w_{{min}} &lt; q &lt; w_{{max}}`. If ``length`` is set, then</span>
<span class="sd">    the length is set to use only those data with</span>
<span class="sd">    :math:`l_{{min}} &lt; p &lt; l_{{max}}`. If the ``endpoint`` parameter</span>
<span class="sd">    has been used to define the projection, then ``length=&quot;w&quot;`` may be used to</span>
<span class="sd">    window the length of the projection to exactly the span from O to B.</span>

<span class="sd">    Flat Earth (Cartesian) coordinate transformations can also be made. Set</span>
<span class="sd">    ``flat_earth=True`` and remember that azimuth is clockwise from North (the</span>
<span class="sd">    y axis), NOT the usual cartesian theta, which is counterclockwise from the</span>
<span class="sd">    x axis. azimuth = 90 - theta.</span>

<span class="sd">    No assumptions are made regarding the units for</span>
<span class="sd">    :math:`x, y, r, s, p, q, dist, l_{{min}}, l_{{max}}, w_{{min}}, w_{{max}}`.</span>
<span class="sd">    If ``unit`` is selected, map units are assumed and :math:`x, y, r, s` must</span>
<span class="sd">    be in degrees and</span>
<span class="sd">    :math:`p, q, dist, l_{{min}}, l_{{max}}, w_{{min}}, w_{{max}}`</span>
<span class="sd">    will be in km.</span>

<span class="sd">    Calculations of specific great-circle and geodesic distances or for</span>
<span class="sd">    back-azimuths or azimuths are better done using :gmt-docs:`mapproject` as</span>
<span class="sd">    project is strictly spherical.</span>

<span class="sd">    Full option list at :gmt-docs:`project.html`</span>

<span class="sd">    {aliases}</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : str or {table-like}</span>
<span class="sd">        Pass in (x, y, z) or (longitude, latitude, elevation) values by</span>
<span class="sd">        providing a file name to an ASCII data table, a 2-D</span>
<span class="sd">        {table-classes}.</span>

<span class="sd">    center : str or list</span>
<span class="sd">        *cx*/*cy*.</span>
<span class="sd">        Set the origin of the projection, in Definition 1 or 2. If</span>
<span class="sd">        Definition 3 is used, then *cx/cy* are the coordinates of a</span>
<span class="sd">        point through which the oblique zero meridian (:math:`p = 0`) should</span>
<span class="sd">        pass. The *cx/cy* is not required to be 90 degrees from the pole.</span>

<span class="sd">    azimuth : float or str</span>
<span class="sd">        Define the azimuth of the projection (Definition 1).</span>

<span class="sd">    endpoint : str or list</span>
<span class="sd">        *bx*/*by*.</span>
<span class="sd">        Define the end point of the projection path (Definition 2).</span>

<span class="sd">    convention : str</span>
<span class="sd">        Specify the desired output using any combination of **xyzpqrs**, in</span>
<span class="sd">        any order [Default is **xypqrsz**]. Do not space between the letters.</span>
<span class="sd">        Use lower case. The output will be columns of values corresponding to</span>
<span class="sd">        your ``convention``. The **z** flag is special and refers to all</span>
<span class="sd">        numerical columns beyond the leading **x** and **y** in your input</span>
<span class="sd">        record. The **z** flag also includes any trailing text (which is</span>
<span class="sd">        placed at the end of the record regardless of the order of **z** in</span>
<span class="sd">        ``convention``). **Note**: If ``generate`` is True, then the output</span>
<span class="sd">        order is hardwired to be **rsp** and ``convention`` is not allowed.</span>

<span class="sd">    generate : str</span>
<span class="sd">        *dist* [/*colat*][**+c**\|\ **h**].</span>
<span class="sd">        Create :math:`(r, s, p)` output data every *dist* units of :math:`p`</span>
<span class="sd">        (See ``unit`` parameter). Alternatively, append */colat* for a small</span>
<span class="sd">        circle instead [Default is a colatitude of 90, i.e., a great circle].</span>
<span class="sd">        If setting a pole with ``pole`` and you want the small circle to go</span>
<span class="sd">        through *cx*/*cy*, append **+c** to compute the required colatitude.</span>
<span class="sd">        Use ``center`` and ``endpoint`` to generate a circle that goes</span>
<span class="sd">        through the center and end point. Note, in this case the center and</span>
<span class="sd">        end point cannot be farther apart than :math:`2|\mbox{{colat}}|`.</span>
<span class="sd">        Finally, if you append **+h** then we will report the position of</span>
<span class="sd">        the pole as part of the segment header [Default is no header].</span>
<span class="sd">        **Note**: No input is read and the value of ``data``, ``x``, ``y``,</span>
<span class="sd">        and ``z`` is ignored if ``generate`` is used.</span>

<span class="sd">    length : str or list</span>
<span class="sd">        [**w**\|\ *l_min*/*l_max*].</span>
<span class="sd">        Project only those data whose *p* coordinate is</span>
<span class="sd">        within :math:`l_{{min}} &lt; p &lt; l_{{max}}`. If ``endpoint`` has been set,</span>
<span class="sd">        then you may alternatively use **w** to stay within the distance from</span>
<span class="sd">        ``center`` to ``endpoint``.</span>

<span class="sd">    flat_earth : bool</span>
<span class="sd">        Make a Cartesian coordinate transformation in the plane.</span>
<span class="sd">        [Default is ``False``; plane created with spherical trigonometry.]</span>

<span class="sd">    unit : bool</span>
<span class="sd">        Set units for :math:`x, y, r, s` to degrees and</span>
<span class="sd">        :math:`p, q, dist, l_{{min}}, l_{{max}}, w_{{min}}, w_{{max}}` to km.</span>
<span class="sd">        [Default is ``False``; all arguments use the same units]</span>

<span class="sd">    sort : bool</span>
<span class="sd">        Sort the output into increasing :math:`p` order. Useful when projecting</span>
<span class="sd">        random data into a sequential profile.</span>

<span class="sd">    pole : str or list</span>
<span class="sd">        *px*/*py*.</span>
<span class="sd">        Set the position of the rotation pole of the projection.</span>
<span class="sd">        (Definition 3).</span>

<span class="sd">    {verbose}</span>

<span class="sd">    width : str or list</span>
<span class="sd">        *w_min*/*w_max*.</span>
<span class="sd">        Project only those data whose :math:`q` coordinate is</span>
<span class="sd">        within :math:`w_{{min}} &lt; q &lt; w_{{max}}`.</span>

<span class="sd">    ellipse : str</span>
<span class="sd">        *major*/*minor*/*azimuth* [**+e**\|\ **n**].</span>
<span class="sd">        Used in conjunction with ``center`` (sets its center) and ``generate``</span>
<span class="sd">        (sets the distance increment) to create the coordinates of an ellipse</span>
<span class="sd">        with *major* and *minor* axes given in km (unless ``flat_earth`` is</span>
<span class="sd">        given for a Cartesian ellipse) and the *azimuth* of the major axis in</span>
<span class="sd">        degrees. Append **+e** to adjust the increment set via ``generate`` so</span>
<span class="sd">        that the the ellipse has equal distance increments [Default uses the</span>
<span class="sd">        given increment and closes the ellipse].  Instead, append **+n** to set</span>
<span class="sd">        a specific number of unique equidistant data via ``generate``. For</span>
<span class="sd">        degenerate ellipses you can just supply a single *diameter* instead.  A</span>
<span class="sd">        geographic diameter may be specified in any desired unit other than km</span>
<span class="sd">        by appending the unit (e.g., 3-D for degrees) [Default is km];</span>
<span class="sd">        the increment is assumed to be in the same unit.  **Note**:</span>
<span class="sd">        For the Cartesian ellipse (which requires ``flat_earth``), the</span>
<span class="sd">        *direction* is counter-clockwise from the horizontal instead of an</span>
<span class="sd">        *azimuth*.</span>

<span class="sd">    outfile : str</span>
<span class="sd">        The file name for the output ASCII file.</span>

<span class="sd">    {coltypes}</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    track: pandas.DataFrame or None</span>
<span class="sd">        Return type depends on whether the ``outfile`` parameter is set:</span>

<span class="sd">        - :class:`pandas.DataFrame` table with (x, y, ..., newcolname) if</span>
<span class="sd">          ``outfile`` is not set</span>
<span class="sd">        - None if ``outfile`` is set (output will be stored in file set</span>
<span class="sd">          by ``outfile``)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;The `center` parameter must be specified.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
            <span class="s2">&quot;The `data` parameter must be specified unless `generate` is used.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
            <span class="s2">&quot;The `convention` parameter is not allowed with `generate`.&quot;</span>
        <span class="p">)</span>

    <span class="k">with</span> <span class="n">GMTTempFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;.csv&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tmpfile</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Output to tmpfile if outfile is not set</span>
            <span class="n">outfile</span> <span class="o">=</span> <span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Choose how data will be passed into the module</span>
                <span class="n">table_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_data</span><span class="p">(</span>
                    <span class="n">check_kind</span><span class="o">=</span><span class="s2">&quot;vector&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">required_z</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">)</span>

                <span class="c1"># Run project on the temporary (csv) data table</span>
                <span class="k">with</span> <span class="n">table_context</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
                    <span class="n">arg_str</span> <span class="o">=</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">infile</span><span class="o">=</span><span class="n">infile</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arg_str</span> <span class="o">=</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="s2">&quot;project&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">arg_str</span><span class="p">)</span>

        <span class="c1"># if user did not set outfile, return pd.DataFrame</span>
        <span class="k">if</span> <span class="n">outfile</span> <span class="o">==</span> <span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">column_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;rsp&quot;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
        <span class="c1"># return None if outfile set, output in outfile</span>
        <span class="k">elif</span> <span class="n">outfile</span> <span class="o">!=</span> <span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">result</span></div>
</pre></div>

           </div>
          </div>
          
<footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2023, The PyGMT Developers.
      <span class="commit">Revision <code><a href="https://github.com/GenericMappingTools/pygmt/commit/1d8944fc">1d8944fc</a></code>.
      </span>
      <span class="lastupdated">Last updated on Mar 31, 2023.
      </span></p>
  </div>

  
<p>
Built with <a href="http://sphinx-doc.org/">Sphinx</a>
using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
provided by <a href="https://readthedocs.org">Read the Docs</a>
</p>
<p>
This website uses Google Analytics to gather usage statistics.
However, it does not use cookies or track you across different websites.
Page view data are used to help us improve the site and provide an estimate of the
software usage.
</p>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>