
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>pygmt.src.text &mdash; PyGMT</title>
    

      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../_static/style.css?v=845ca4e4" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="canonical" href="https://pygmt.org/dev/_modules/pygmt/src/text.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=24e39716"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=ccdb6887"></script>
        <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <!-- Google Analytics tracking code -->
    <!-- See https://developers.google.com/analytics/devguides/collection/analyticsjs/ for documentation. -->
    <!-- 'storage': 'none' disables cookies -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-38125837-7', 'auto', {'storage': 'none'});
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>

    <!-- Documentation switcher -->
    <!-- Point to the *dev* version switcher. This will allow the latest versions to appear on older documentation. -->
    <script type="text/javascript" src="/dev/_static/version_switch.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href="../../../index.html"><h2 class="sidebar-title">PyGMT</h2></a>

    
        
        
            <div class="version">
                dev
            </div>
        
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Intro to PyGMT</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projections/index.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../external_resources.html">External Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../techref/index.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../minversions.html">Minimum Supported Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem.html">Ecosystem</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../team.html">PyGMT Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintenance.html">Maintainers Guide</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help and contributing</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md"><i class="fa fa-gavel fa-fw"></i> Code of Conduct</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt/blob/main/LICENSE.txt"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org"><i class="fa fa-comment fa-fw"></i> Contact</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">PyGMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
<div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">pygmt.src.text</li>
    <li class="source-link">
        
    </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pygmt.src.text</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">text - Plot text on a figure.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sequence</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt._typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnchorCode</span><span class="p">,</span> <span class="n">StringArrayTypes</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt.clib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">GMTInvalidInput</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">_check_encoding</span><span class="p">,</span>
    <span class="n">build_arg_list</span><span class="p">,</span>
    <span class="n">data_kind</span><span class="p">,</span>
    <span class="n">fmt_docstring</span><span class="p">,</span>
    <span class="n">is_nonstr_iter</span><span class="p">,</span>
    <span class="n">kwargs_to_strings</span><span class="p">,</span>
    <span class="n">non_ascii_to_octal</span><span class="p">,</span>
    <span class="n">use_alias</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@fmt_docstring</span>
<span class="nd">@use_alias</span><span class="p">(</span>
    <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
    <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
    <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
    <span class="n">C</span><span class="o">=</span><span class="s2">&quot;clearance&quot;</span><span class="p">,</span>
    <span class="n">D</span><span class="o">=</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span>
    <span class="n">G</span><span class="o">=</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span>
    <span class="n">N</span><span class="o">=</span><span class="s2">&quot;no_clip&quot;</span><span class="p">,</span>
    <span class="n">V</span><span class="o">=</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span>
    <span class="n">W</span><span class="o">=</span><span class="s2">&quot;pen&quot;</span><span class="p">,</span>
    <span class="n">a</span><span class="o">=</span><span class="s2">&quot;aspatial&quot;</span><span class="p">,</span>
    <span class="n">c</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">,</span>
    <span class="n">e</span><span class="o">=</span><span class="s2">&quot;find&quot;</span><span class="p">,</span>
    <span class="n">f</span><span class="o">=</span><span class="s2">&quot;coltypes&quot;</span><span class="p">,</span>
    <span class="n">h</span><span class="o">=</span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
    <span class="n">it</span><span class="o">=</span><span class="s2">&quot;use_word&quot;</span><span class="p">,</span>
    <span class="n">p</span><span class="o">=</span><span class="s2">&quot;perspective&quot;</span><span class="p">,</span>
    <span class="n">t</span><span class="o">=</span><span class="s2">&quot;transparency&quot;</span><span class="p">,</span>
    <span class="n">w</span><span class="o">=</span><span class="s2">&quot;wrap&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">text_</span><span class="p">(</span>  <span class="c1"># noqa: PLR0912</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">textfiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="n">AnchorCode</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">StringArrayTypes</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">angle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">justify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">AnchorCode</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">AnchorCode</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot or typeset text strings of variable size, font type, and orientation.</span>

<span class="sd">    Must provide at least one of the following combinations as input:</span>

<span class="sd">    - ``textfiles``</span>
<span class="sd">    - ``x``/``y``, and ``text``</span>
<span class="sd">    - ``position`` and ``text``</span>

<span class="sd">    The text strings passed via the ``text`` parameter can contain ASCII characters and</span>
<span class="sd">    non-ASCII characters defined in the Adobe ISOLatin1+, Adobe Symbol, Adobe</span>
<span class="sd">    ZapfDingbats and ISO-8859-x (x can be 1-11, 13-16) encodings. Refer to</span>
<span class="sd">    :doc:`/techref/encodings` for the full list of supported non-ASCII characters.</span>

<span class="sd">    Full option list at :gmt-docs:`text.html`.</span>

<span class="sd">    {aliases}</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    textfiles : str or list</span>
<span class="sd">        A file name or a list of file names containing one or more records.</span>
<span class="sd">        Each record has the following columns:</span>

<span class="sd">        * *x*: X coordinate or longitude</span>
<span class="sd">        * *y*: Y coordinate or latitude</span>
<span class="sd">        * *angle*: Angle in degrees counter-clockwise from horizontal</span>
<span class="sd">        * *font*: Text size, font, and color</span>
<span class="sd">        * *justify*: Two-character justification code</span>
<span class="sd">        * *text*: The text string to typeset</span>

<span class="sd">        The *angle*, *font*, and *justify* columns are optional and can be set</span>
<span class="sd">        by using the ``angle``, ``font``, and ``justify`` parameters,</span>
<span class="sd">        respectively. If these parameters are set to ``True``, then the</span>
<span class="sd">        corresponding columns must be present in the input file(s) and the</span>
<span class="sd">        columns must be in the order mentioned above.</span>
<span class="sd">    x/y : float or 1-D arrays</span>
<span class="sd">        The x and y coordinates, or an array of x and y coordinates to plot</span>
<span class="sd">        the text.</span>
<span class="sd">    position</span>
<span class="sd">        Set reference point on the map for the text by using x, y</span>
<span class="sd">        coordinates extracted from ``region`` instead of providing them</span>
<span class="sd">        through ``x``/``y``. Specify with a two-letter (order independent)</span>
<span class="sd">        code, chosen from:</span>

<span class="sd">        * Vertical: **T**\ (op), **M**\ (iddle), **B**\ (ottom)</span>
<span class="sd">        * Horizontal: **L**\ (eft), **C**\ (entre), **R**\ (ight)</span>

<span class="sd">        For example, ``position=&quot;TL&quot;`` plots the text at the Top Left corner</span>
<span class="sd">        of the map.</span>
<span class="sd">    text</span>
<span class="sd">        The text string, or an array of strings to plot on the figure.</span>
<span class="sd">    angle: float, str, bool or list</span>
<span class="sd">        Set the angle measured in degrees counter-clockwise from</span>
<span class="sd">        horizontal (e.g. 30 sets the text at 30 degrees). If no angle is</span>
<span class="sd">        explicitly given (i.e. ``angle=True``) then the input to ``textfiles``</span>
<span class="sd">        must have this as a column.</span>
<span class="sd">    font : str, bool or list of str</span>
<span class="sd">        Set the font specification with format *size*\ ,\ *font*\ ,\ *color*</span>
<span class="sd">        where *size* is text size in points, *font* is the font to use, and</span>
<span class="sd">        *color* sets the font color. For example,</span>
<span class="sd">        ``font=&quot;12p,Helvetica-Bold,red&quot;`` selects a 12p, red, Helvetica-Bold</span>
<span class="sd">        font. If no font info is explicitly given (i.e. ``font=True``), then</span>
<span class="sd">        the input to ``textfiles`` must have this information in one of its</span>
<span class="sd">        columns.</span>
<span class="sd">    justify</span>
<span class="sd">        Set the alignment which refers to the part of the text string that</span>
<span class="sd">        will be mapped onto the (x, y) point. Choose a two-letter</span>
<span class="sd">        combination of **L**, **C**, **R** (for left, center, or right) and</span>
<span class="sd">        **T**, **M**, **B** (for top, middle, or bottom). E.g., **BL** for</span>
<span class="sd">        bottom left. If no justification is explicitly given</span>
<span class="sd">        (i.e. ``justify=True``), then the input to ``textfiles`` must have</span>
<span class="sd">        this as a column.</span>
<span class="sd">    {projection}</span>
<span class="sd">    {region}</span>
<span class="sd">        *Required if this is the first plot command.*</span>
<span class="sd">    clearance : str</span>
<span class="sd">        [*dx/dy*][**+to**\|\ **O**\|\ **c**\|\ **C**].</span>
<span class="sd">        Adjust the clearance between the text and the surrounding box</span>
<span class="sd">        [Default is 15% of the font size]. Only used if ``pen`` or ``fill``</span>
<span class="sd">        are specified. Append the unit you want (**c** for centimeters,</span>
<span class="sd">        **i** for inches, or **p** for points; if not given we consult</span>
<span class="sd">        :gmt-term:`PROJ_LENGTH_UNIT`) or *%* for a percentage of the font</span>
<span class="sd">        size. Optionally, use modifier **+t** to set the shape of the text</span>
<span class="sd">        box when using ``fill`` and/or ``pen``. Append lowercase **o**</span>
<span class="sd">        to get a straight rectangle [Default is **o**]. Append uppercase</span>
<span class="sd">        **O** to get a rounded rectangle. In paragraph mode (*paragraph*)</span>
<span class="sd">        you can also append lowercase **c** to get a concave rectangle or</span>
<span class="sd">        append uppercase **C** to get a convex rectangle.</span>
<span class="sd">    fill : str</span>
<span class="sd">        Set color for filling text boxes [Default is no fill].</span>
<span class="sd">    offset : str</span>
<span class="sd">        [**j**\|\ **J**]\ *dx*\[/*dy*][**+v**\[*pen*]].</span>
<span class="sd">        Offset the text from the projected (x, y) point by *dx*/\ *dy*</span>
<span class="sd">        [Default is ``&quot;0/0&quot;``].</span>
<span class="sd">        If *dy* is not specified then it is set equal to *dx*. Use **j** to</span>
<span class="sd">        offset the text away from the point instead (i.e., the text</span>
<span class="sd">        justification will determine the direction of the shift). Using</span>
<span class="sd">        **J** will shorten diagonal offsets at corners by sqrt(2).</span>
<span class="sd">        Optionally, append **+v** which will draw a line from the original</span>
<span class="sd">        point to the shifted point; append a pen to change the attributes</span>
<span class="sd">        for this line.</span>
<span class="sd">    pen : str</span>
<span class="sd">        Set the pen used to draw a rectangle around the text string</span>
<span class="sd">        (see ``clearance``) [Default is ``&quot;0.25p,black,solid&quot;``].</span>
<span class="sd">    no_clip : bool</span>
<span class="sd">        Do **not** clip text at the frame boundaries [Default is</span>
<span class="sd">        ``False``].</span>
<span class="sd">    {verbose}</span>
<span class="sd">    {aspatial}</span>
<span class="sd">    {panel}</span>
<span class="sd">    {find}</span>
<span class="sd">    {coltypes}</span>
<span class="sd">    {header}</span>
<span class="sd">    use_word : int</span>
<span class="sd">        Select a specific word from the trailing text, with the first</span>
<span class="sd">        word being 0 [Default is the entire trailing text]. No numerical</span>
<span class="sd">        columns can be specified.</span>
<span class="sd">    {perspective}</span>
<span class="sd">    {transparency}</span>
<span class="sd">        ``transparency`` can also be a 1-D array to set varying</span>
<span class="sd">        transparency for texts, but this option is only valid if using</span>
<span class="sd">        ``x``/``y`` and ``text``.</span>
<span class="sd">    {wrap}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Ensure inputs are either textfiles, x/y/text, or position/text</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">textfiles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="o">+</span> <span class="p">(</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="o">+</span> <span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Provide either &#39;textfiles&#39;, &#39;x&#39;/&#39;y&#39;/&#39;text&#39;, or &#39;position&#39;/&#39;text&#39;.&quot;</span>
        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">required_data</span> <span class="o">=</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">textfiles</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="n">required_data</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">text</span><span class="p">)):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;text&#39; can&#39;t be None or array when &#39;position&#39; is given.&quot;</span>
        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">textfiles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;text&#39; can&#39;t be specified when &#39;textfiles&#39; is given.&quot;</span>
        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;empty&quot;</span> <span class="ow">and</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Must provide text with x/y pairs.&quot;</span>
        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Arguments that can accept arrays.</span>
    <span class="n">array_args</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="s2">&quot;+a&quot;</span><span class="p">,</span> <span class="s2">&quot;angle&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">font</span><span class="p">,</span> <span class="s2">&quot;+f&quot;</span><span class="p">,</span> <span class="s2">&quot;font&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">justify</span><span class="p">,</span> <span class="s2">&quot;+j&quot;</span><span class="p">,</span> <span class="s2">&quot;justify&quot;</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="c1"># Build the -F option.</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span>
        <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">justify</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;F&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">})</span>

    <span class="k">for</span> <span class="n">arg</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">array_args</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">flag</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flag</span><span class="si">}{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">extra_arrays</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">confdict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">arg</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">array_args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">flag</span>
                <span class="c1"># angle is numeric type and font/justify are str type.</span>
                <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;angle&quot;</span><span class="p">:</span>
                    <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">str_</span><span class="p">))</span>

        <span class="c1"># If an array of transparency is given, GMT will read it from the last numerical</span>
        <span class="c1"># column per data record.</span>
        <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">)):</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">])</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Append text to the last column. Text must be passed in as str type.</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">str_</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">encoding</span> <span class="o">:=</span> <span class="n">_check_encoding</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">flatten</span><span class="p">())))</span> <span class="o">!=</span> <span class="s2">&quot;ascii&quot;</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">non_ascii_to_octal</span><span class="p">,</span> <span class="n">excluded</span><span class="o">=</span><span class="s2">&quot;encoding&quot;</span><span class="p">)(</span>
                <span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span>
            <span class="p">)</span>
            <span class="n">confdict</span><span class="p">[</span><span class="s2">&quot;PS_CHAR_ENCODING&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">encoding</span>
        <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;+c</span><span class="si">{</span><span class="n">position</span><span class="si">}</span><span class="s2">+t</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">for</span> <span class="n">arg</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="o">*</span><span class="n">array_args</span><span class="p">,</span> <span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">),</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;transparency&quot;</span><span class="p">)]:</span>
            <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Argument of &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; must be a single value or True.&quot;</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_in</span><span class="p">(</span>
            <span class="n">check_kind</span><span class="o">=</span><span class="s2">&quot;vector&quot;</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">textfiles</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
            <span class="n">extra_arrays</span><span class="o">=</span><span class="n">extra_arrays</span><span class="p">,</span>
            <span class="n">required_data</span><span class="o">=</span><span class="n">required_data</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">vintbl</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span>
                <span class="n">module</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
                <span class="n">args</span><span class="o">=</span><span class="n">build_arg_list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">infile</span><span class="o">=</span><span class="n">vintbl</span><span class="p">,</span> <span class="n">confdict</span><span class="o">=</span><span class="n">confdict</span><span class="p">),</span>
            <span class="p">)</span>
</pre></div>

           </div>
          </div>
          
<footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2025, The PyGMT Developers.
      <span class="commit">Revision <code><a href="https://github.com/GenericMappingTools/pygmt/commit/a4a16762">a4a16762</a></code>.
      </span>
      <span class="lastupdated">Last updated on Feb 13, 2025.
      </span></p>
  </div>

  
<p>
Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
provided by <a href="https://readthedocs.org">Read the Docs</a>
</p>
<p>
This website uses Google Analytics to gather usage statistics.
However, it does not use cookies or track you across different websites.
Page view data are used to help us improve the site and provide an estimate of the
software usage.
</p>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>