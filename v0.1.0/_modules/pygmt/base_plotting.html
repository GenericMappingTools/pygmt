


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    
        <title>pygmt.base_plotting &mdash; PyGMT</title>
    


  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-dataframe.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <!-- Google Analytics tracking code -->
    <!-- See https://developers.google.com/analytics/devguides/collection/analyticsjs/ for documentation. -->
    <!-- 'storage': 'none' disables cookies -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-38125837-7', 'auto', {'storage': 'none'});
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
    <a href="../../index.html"><h2 class="sidebar-title">PyGMT</h2></a>

    
        
        
            <div class="version">
                v0.1.0
            </div>
        
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/first-figure.html">Making your first figure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gallery/index.html">Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/frames.html">Frames, ticks, titles, and labels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projections/index.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/coastlines.html">Coastlines and borders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/plot.html">Plotting data points</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a></li>
</ul>

            
          

    
        <p class="caption">
            <span class="caption-text">Getting help and contributing</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt/blob/master/CONTRIBUTING.md"><i class="fa fa-users fa-fw"></i> Contributing</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt/blob/master/CODE_OF_CONDUCT.md"><i class="fa fa-gavel fa-fw"></i> Code of Conduct</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt/blob/master/LICENSE.txt"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org"><i class="fa fa-comment fa-fw"></i> Contact</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyGMT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../pygmt.html">pygmt</a> &raquo;</li>
        
      <li>pygmt.base_plotting</li>
    
    
    <li class="source-link">
        
        
    </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pygmt.base_plotting</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Base class with plot generating commands.</span>
<span class="sd">Does not define any special non-GMT methods (savefig, show, etc).</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">contextlib</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">.clib</span> <span class="kn">import</span> <span class="n">Session</span>
<span class="kn">from</span> <span class="nn">.exceptions</span> <span class="kn">import</span> <span class="n">GMTInvalidInput</span>
<span class="kn">from</span> <span class="nn">.helpers</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">build_arg_string</span><span class="p">,</span>
    <span class="n">dummy_context</span><span class="p">,</span>
    <span class="n">data_kind</span><span class="p">,</span>
    <span class="n">fmt_docstring</span><span class="p">,</span>
    <span class="n">GMTTempFile</span><span class="p">,</span>
    <span class="n">use_alias</span><span class="p">,</span>
    <span class="n">kwargs_to_strings</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">BasePlotting</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for Figure and Subplot.</span>

<span class="sd">    Defines the plot generating methods and a hook for subclasses to insert</span>
<span class="sd">    special arguments (the _preprocess method).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_preprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># pylint: disable=no-self-use</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make any changes to kwargs or required actions before plotting.</span>

<span class="sd">        This method is run before all plotting commands and can be used to</span>
<span class="sd">        insert special arguments into the kwargs or make any actions that are</span>
<span class="sd">        required before ``call_module``.</span>

<span class="sd">        For example, the :class:`pygmt.Figure` needs this to tell the GMT</span>
<span class="sd">        modules to plot to a specific figure.</span>

<span class="sd">        This is a dummy method that does nothing.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        kwargs : dict</span>
<span class="sd">            The same input kwargs dictionary.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; base = BasePlotting()</span>
<span class="sd">        &gt;&gt;&gt; base._preprocess(resolution=&#39;low&#39;)</span>
<span class="sd">        {&#39;resolution&#39;: &#39;low&#39;}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">kwargs</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span>
        <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
        <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
        <span class="n">A</span><span class="o">=</span><span class="s2">&quot;area_thresh&quot;</span><span class="p">,</span>
        <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
        <span class="n">D</span><span class="o">=</span><span class="s2">&quot;resolution&quot;</span><span class="p">,</span>
        <span class="n">I</span><span class="o">=</span><span class="s2">&quot;rivers&quot;</span><span class="p">,</span>
        <span class="n">L</span><span class="o">=</span><span class="s2">&quot;map_scale&quot;</span><span class="p">,</span>
        <span class="n">N</span><span class="o">=</span><span class="s2">&quot;borders&quot;</span><span class="p">,</span>
        <span class="n">W</span><span class="o">=</span><span class="s2">&quot;shorelines&quot;</span><span class="p">,</span>
        <span class="n">G</span><span class="o">=</span><span class="s2">&quot;land&quot;</span><span class="p">,</span>
        <span class="n">S</span><span class="o">=</span><span class="s2">&quot;water&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">coast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot continents, shorelines, rivers, and borders on maps</span>

<span class="sd">        Plots grayshaded, colored, or textured land-masses [or water-masses] on</span>
<span class="sd">        maps and [optionally] draws coastlines, rivers, and political</span>
<span class="sd">        boundaries.  Alternatively, it can (1) issue clip paths that will</span>
<span class="sd">        contain all land or all water areas, or (2) dump the data to an ASCII</span>
<span class="sd">        table. The data files come in 5 different resolutions: (**f**)ull,</span>
<span class="sd">        (**h**)igh, (**i**)ntermediate, (**l**)ow, and (**c**)rude. The full</span>
<span class="sd">        resolution files amount to more than 55 Mb of data and provide great</span>
<span class="sd">        detail; for maps of larger geographical extent it is more economical to</span>
<span class="sd">        use one of the other resolutions. If the user selects to paint the</span>
<span class="sd">        land-areas and does not specify fill of water-areas then the latter</span>
<span class="sd">        will be transparent (i.e., earlier graphics drawn in those areas will</span>
<span class="sd">        not be overwritten).  Likewise, if the water-areas are painted and no</span>
<span class="sd">        land fill is set then the land-areas will be transparent.</span>

<span class="sd">        A map projection must be supplied.</span>

<span class="sd">        Full option list at :gmt-docs:`coast.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        A : int, float, or str</span>
<span class="sd">            ``&#39;min_area[/min_level/max_level][+ag|i|s|S][+r|l][+ppercent]&#39;``</span>
<span class="sd">            Features with an area smaller than min_area in km^2 or of</span>
<span class="sd">            hierarchical level that is lower than min_level or higher than</span>
<span class="sd">            max_level will not be plotted.</span>
<span class="sd">        {B}</span>
<span class="sd">        C : str</span>
<span class="sd">            Set the shade, color, or pattern for lakes and river-lakes.</span>
<span class="sd">        D : str</span>
<span class="sd">            Selects the resolution of the data set to use ((f)ull, (h)igh,</span>
<span class="sd">            (i)ntermediate, (l)ow, and (c)rude).</span>
<span class="sd">        G : str</span>
<span class="sd">            Select filling or clipping of “dry” areas.</span>
<span class="sd">        I : str</span>
<span class="sd">            ``&#39;river[/pen]&#39;``</span>
<span class="sd">            Draw rivers. Specify the type of rivers and [optionally] append pen</span>
<span class="sd">            attributes.</span>
<span class="sd">        L : str</span>
<span class="sd">            ``&#39;[g|j|J|n|x]refpoint&#39;``</span>
<span class="sd">            Draws a simple map scale centered on the reference point specified.</span>
<span class="sd">        N : str</span>
<span class="sd">            ``&#39;border[/pen]&#39;``</span>
<span class="sd">            Draw political boundaries. Specify the type of boundary and</span>
<span class="sd">            [optionally] append pen attributes</span>
<span class="sd">        S : str</span>
<span class="sd">            Select filling or clipping of “wet” areas.</span>
<span class="sd">        {U}</span>
<span class="sd">        W : str</span>
<span class="sd">            ``&#39;[level/]pen&#39;``</span>
<span class="sd">            Draw shorelines [Default is no shorelines]. Append pen attributes.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;coast&quot;</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span>
        <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
        <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
        <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
        <span class="n">C</span><span class="o">=</span><span class="s2">&quot;cmap&quot;</span><span class="p">,</span>
        <span class="n">D</span><span class="o">=</span><span class="s2">&quot;position&quot;</span><span class="p">,</span>
        <span class="n">F</span><span class="o">=</span><span class="s2">&quot;box&quot;</span><span class="p">,</span>
        <span class="n">G</span><span class="o">=</span><span class="s2">&quot;truncate&quot;</span><span class="p">,</span>
        <span class="n">W</span><span class="o">=</span><span class="s2">&quot;scale&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot a gray or color scale-bar on maps.</span>

<span class="sd">        Both horizontal and vertical scales are supported. For CPTs with</span>
<span class="sd">        gradational colors (i.e., the lower and upper boundary of an interval</span>
<span class="sd">        have different colors) we will interpolate to give a continuous scale.</span>
<span class="sd">        Variations in intensity due to shading/illumination may be displayed by</span>
<span class="sd">        setting the option -I. Colors may be spaced according to a linear</span>
<span class="sd">        scale, all be equal size, or by providing a file with individual tile</span>
<span class="sd">        widths.</span>

<span class="sd">        Full option list at :gmt-docs:`colorbar.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        position (D) : str</span>
<span class="sd">            ``[g|j|J|n|x]refpoint[+wlength[/width]][+e[b|f][length]][+h|v]</span>
<span class="sd">            [+jjustify][+m[a|c|l|u]][+n[txt]][+odx[/dy]]``. Defines the</span>
<span class="sd">            reference point on the map for the color scale using one of four</span>
<span class="sd">            coordinate systems: (1) Use -Dg for map (user) coordinates, (2) use</span>
<span class="sd">            -Dj or -DJ for setting refpoint via a 2-char justification code</span>
<span class="sd">            that refers to the (invisible) map domain rectangle, (3) use -Dn</span>
<span class="sd">            for normalized (0-1) coordinates, or (4) use -Dx for plot</span>
<span class="sd">            coordinates (inches, cm, etc.). All but -Dx requires both -R and</span>
<span class="sd">            -J to be specified. Append +w followed by the length and width of</span>
<span class="sd">            the color bar. If width is not specified then it is set to 4% of</span>
<span class="sd">            the given length. Give a negative length to reverse the scale bar.</span>
<span class="sd">            Append +h to get a horizontal scale [Default is vertical (+v)]. By</span>
<span class="sd">            default, the anchor point on the scale is assumed to be the bottom</span>
<span class="sd">            left corner (BL), but this can be changed by appending +j followed</span>
<span class="sd">            by a 2-char justification code justify.</span>
<span class="sd">        box (F) : bool or str</span>
<span class="sd">            ``[+cclearances][+gfill][+i[[gap/]pen]][+p[pen]][+r[radius]]</span>
<span class="sd">            [+s[[dx/dy/][shade]]]``. If set to True, draws a rectangular</span>
<span class="sd">            border around the color scale. Alternatively, specify a different</span>
<span class="sd">            pen with +ppen. Add +gfill to fill the scale panel [no fill].</span>
<span class="sd">            Append +cclearance where clearance is either gap, xgap/ygap, or</span>
<span class="sd">            lgap/rgap/bgap/tgap where these items are uniform, separate in x-</span>
<span class="sd">            and y-direction, or individual side spacings between scale and</span>
<span class="sd">            border. Append +i to draw a secondary, inner border as well. We use</span>
<span class="sd">            a uniform gap between borders of 2p and the MAP_DEFAULTS_PEN unless</span>
<span class="sd">            other values are specified. Append +r to draw rounded rectangular</span>
<span class="sd">            borders instead, with a 6p corner radius. You can override this</span>
<span class="sd">            radius by appending another value. Finally, append +s to draw an</span>
<span class="sd">            offset background shaded region. Here, dx/dy indicates the shift</span>
<span class="sd">            relative to the foreground frame [4p/-4p] and shade sets the fill</span>
<span class="sd">            style to use for shading [gray50].</span>
<span class="sd">        truncate (G) : list or str</span>
<span class="sd">            ``zlo/zhi`` Truncate the incoming CPT so that the lowest and</span>
<span class="sd">            highest z-levels are to zlo and zhi. If one of these equal NaN then</span>
<span class="sd">            we leave that end of the CPT alone. The truncation takes place</span>
<span class="sd">            before the plotting.</span>
<span class="sd">        scale (W) : float</span>
<span class="sd">            Multiply all z-values in the CPT by the provided scale. By default</span>
<span class="sd">            the CPT is used as is.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;colorbar&quot;</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span>
        <span class="n">A</span><span class="o">=</span><span class="s2">&quot;annotation&quot;</span><span class="p">,</span>
        <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
        <span class="n">C</span><span class="o">=</span><span class="s2">&quot;interval&quot;</span><span class="p">,</span>
        <span class="n">G</span><span class="o">=</span><span class="s2">&quot;label_placement&quot;</span><span class="p">,</span>
        <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
        <span class="n">L</span><span class="o">=</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span>
        <span class="n">Q</span><span class="o">=</span><span class="s2">&quot;cut&quot;</span><span class="p">,</span>
        <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
        <span class="n">S</span><span class="o">=</span><span class="s2">&quot;resample&quot;</span><span class="p">,</span>
        <span class="n">U</span><span class="o">=</span><span class="s2">&quot;logo&quot;</span><span class="p">,</span>
        <span class="n">W</span><span class="o">=</span><span class="s2">&quot;pen&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="s2">&quot;sequence_plus&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">grdcontour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert grids or images to contours and plot them on maps</span>

<span class="sd">        Takes a grid file name or an xarray.DataArray object as input.</span>

<span class="sd">        Full option list at :gmt-docs:`grdcontour.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        grid : str or xarray.DataArray</span>
<span class="sd">            The file name of the input grid or the grid loaded as a DataArray.</span>
<span class="sd">        C : str or int</span>
<span class="sd">            Specify the contour lines to generate.</span>

<span class="sd">            - The filename of a `CPT`  file where the color boundaries will</span>
<span class="sd">              be used as contour levels.</span>
<span class="sd">            - The filename of a 2 (or 3) column file containing the contour</span>
<span class="sd">              levels (col 1), (C)ontour or (A)nnotate (col 2), and optional</span>
<span class="sd">              angle (col 3)</span>
<span class="sd">            - A fixed contour interval ``cont_int`` or a single contour with</span>
<span class="sd">              ``+[cont_int]``</span>
<span class="sd">        A : str,  int, or list</span>
<span class="sd">            Specify or disable annotated contour levels, modifies annotated</span>
<span class="sd">            contours specified in ``-C``.</span>

<span class="sd">            - Specify a fixed annotation interval ``annot_int`` or a</span>
<span class="sd">              single annotation level ``+[annot_int]``</span>
<span class="sd">            - Disable all annotation  with  ``&#39;-&#39;``</span>
<span class="sd">            - Optional label modifiers can be specified as a single string</span>
<span class="sd">              ``&#39;[annot_int]+e&#39;``  or with a list of options</span>
<span class="sd">              ``([annot_int], &#39;e&#39;, &#39;f10p&#39;, &#39;gred&#39;)``.</span>
<span class="sd">        L : str or list of 2 ints</span>
<span class="sd">            Do no draw contours below `low` or above `high`, specify as string</span>
<span class="sd">            ``&#39;[low]/[high]&#39;``  or list ``[low,high]``.</span>
<span class="sd">        Q : string or int</span>
<span class="sd">            Do not draw contours with less than `cut` number of points.</span>
<span class="sd">        S : string or int</span>
<span class="sd">            Resample smoothing factor.</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        {B}</span>
<span class="sd">        {G}</span>
<span class="sd">        {W}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">dummy_context</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;grid&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_grid</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;Unrecognized data type: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">grid</span><span class="p">)))</span>
            <span class="k">with</span> <span class="n">file_context</span> <span class="k">as</span> <span class="n">fname</span><span class="p">:</span>
                <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fname</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
                <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;grdcontour&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span> <span class="n">W</span><span class="o">=</span><span class="s2">&quot;pen&quot;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span> <span class="n">I</span><span class="o">=</span><span class="s2">&quot;shading&quot;</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="s2">&quot;cmap&quot;</span><span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">grdimage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project grids or images and plot them on maps.</span>

<span class="sd">        Takes a grid file name or an xarray.DataArray object as input.</span>

<span class="sd">        Full option list at :gmt-docs:`grdimage.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        grid : str or xarray.DataArray</span>
<span class="sd">            The file name of the input grid or the grid loaded as a DataArray.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">dummy_context</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;grid&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_grid</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;Unrecognized data type: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">grid</span><span class="p">)))</span>
            <span class="k">with</span> <span class="n">file_context</span> <span class="k">as</span> <span class="n">fname</span><span class="p">:</span>
                <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fname</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
                <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;grdimage&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span>
        <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
        <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
        <span class="n">Jz</span><span class="o">=</span><span class="s2">&quot;zscale&quot;</span><span class="p">,</span>
        <span class="n">JZ</span><span class="o">=</span><span class="s2">&quot;zsize&quot;</span><span class="p">,</span>
        <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
        <span class="n">C</span><span class="o">=</span><span class="s2">&quot;cmap&quot;</span><span class="p">,</span>
        <span class="n">G</span><span class="o">=</span><span class="s2">&quot;drapegrid&quot;</span><span class="p">,</span>
        <span class="n">N</span><span class="o">=</span><span class="s2">&quot;plane&quot;</span><span class="p">,</span>
        <span class="n">Q</span><span class="o">=</span><span class="s2">&quot;surftype&quot;</span><span class="p">,</span>
        <span class="n">Wc</span><span class="o">=</span><span class="s2">&quot;contourpen&quot;</span><span class="p">,</span>
        <span class="n">Wm</span><span class="o">=</span><span class="s2">&quot;meshpen&quot;</span><span class="p">,</span>
        <span class="n">Wf</span><span class="o">=</span><span class="s2">&quot;facadepen&quot;</span><span class="p">,</span>
        <span class="n">p</span><span class="o">=</span><span class="s2">&quot;perspective&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">grdview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create 3-D perspective image or surface mesh from a grid.</span>

<span class="sd">        Reads a 2-D grid file and produces a 3-D perspective plot by drawing a</span>
<span class="sd">        mesh, painting a colored/gray-shaded surface made up of polygons, or by</span>
<span class="sd">        scanline conversion of these polygons to a raster image. Options</span>
<span class="sd">        include draping a data set on top of a surface, plotting of contours on</span>
<span class="sd">        top of the surface, and apply artificial illumination based on</span>
<span class="sd">        intensities provided in a separate grid file.</span>

<span class="sd">        Full option list at :gmt-docs:`grdview.html`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        grid : str or xarray.DataArray</span>
<span class="sd">            The file name of the input relief grid or the grid loaded as a</span>
<span class="sd">            DataArray.</span>

<span class="sd">        zscale/zsize : float or str</span>
<span class="sd">            Set z-axis scaling or z-axis size.</span>

<span class="sd">        cmap : str</span>
<span class="sd">            The name of the color palette table to use.</span>

<span class="sd">        drapegrid : str or xarray.DataArray</span>
<span class="sd">            The file name or a DataArray of the image grid to be draped on top</span>
<span class="sd">            of the relief provided by grid. [Default determines colors from</span>
<span class="sd">            grid]. Note that -Jz and -N always refers to the grid. The</span>
<span class="sd">            drapegrid only provides the information pertaining to colors, which</span>
<span class="sd">            (if drapegrid is a grid) will be looked-up via the CPT (see -C).</span>

<span class="sd">        plane : float or str</span>
<span class="sd">            ``level[+gfill]``.</span>
<span class="sd">            Draws a plane at this z-level. If the optional color is provided</span>
<span class="sd">            via the +g modifier, and the projection is not oblique, the frontal</span>
<span class="sd">            facade between the plane and the data perimeter is colored.</span>

<span class="sd">        surftype : str</span>
<span class="sd">            Specifies cover type of the grid.</span>
<span class="sd">            Select one of following settings:</span>
<span class="sd">            1. &#39;m&#39; for mesh plot [Default].</span>
<span class="sd">            2. &#39;mx&#39; or &#39;my&#39; for waterfall plots (row or column profiles).</span>
<span class="sd">            3. &#39;s&#39; for surface plot.</span>
<span class="sd">            4. &#39;i&#39; for image plot.</span>
<span class="sd">            5. &#39;c&#39;. Same as &#39;i&#39; but will make nodes with z = NaN transparent.</span>
<span class="sd">            For any of these choices, you may force a monochrome image by</span>
<span class="sd">            appending the modifier +m.</span>

<span class="sd">        contourpen : str</span>
<span class="sd">            Draw contour lines on top of surface or mesh (not image). Append</span>
<span class="sd">            pen attributes used for the contours.</span>
<span class="sd">        meshpen : str</span>
<span class="sd">            Sets the pen attributes used for the mesh. You must also select -Qm</span>
<span class="sd">            or -Qsm for meshlines to be drawn.</span>
<span class="sd">        facadepen :str</span>
<span class="sd">            Sets the pen attributes used for the facade. You must also select</span>
<span class="sd">            -N for the facade outline to be drawn.</span>

<span class="sd">        perspective : list or str</span>
<span class="sd">            ``&#39;[x|y|z]azim[/elev[/zlevel]][+wlon0/lat0[/z0]][+vx0/y0]&#39;``.</span>
<span class="sd">            Select perspective view.</span>

<span class="sd">        {aliases}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">dummy_context</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;grid&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_grid</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unrecognized data type for grid: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">ExitStack</span><span class="p">()</span> <span class="k">as</span> <span class="n">stack</span><span class="p">:</span>
                <span class="n">fname</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">enter_context</span><span class="p">(</span><span class="n">file_context</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;G&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">drapegrid</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">drapegrid</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;grid&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">drapegrid</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;grid&quot;</span><span class="p">:</span>
                            <span class="n">drape_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_grid</span><span class="p">(</span><span class="n">drapegrid</span><span class="p">)</span>
                            <span class="n">drapefile</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">enter_context</span><span class="p">(</span><span class="n">drape_context</span><span class="p">)</span>
                            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">drapefile</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Unrecognized data type for drapegrid: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">drapegrid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fname</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
                <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;grdview&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span>
        <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
        <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
        <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
        <span class="n">S</span><span class="o">=</span><span class="s2">&quot;style&quot;</span><span class="p">,</span>
        <span class="n">G</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span>
        <span class="n">W</span><span class="o">=</span><span class="s2">&quot;pen&quot;</span><span class="p">,</span>
        <span class="n">i</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">,</span>
        <span class="n">l</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">,</span>
        <span class="n">C</span><span class="o">=</span><span class="s2">&quot;cmap&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sizes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot lines, polygons, and symbols on maps.</span>

<span class="sd">        Used to be psxy.</span>

<span class="sd">        Takes a matrix, (x,y) pairs, or a file name as input and plots lines,</span>
<span class="sd">        polygons, or symbols at those locations on a map.</span>

<span class="sd">        Must provide either *data* or *x* and *y*.</span>

<span class="sd">        If providing data through *x* and *y*, *color* (G) can be a 1d array</span>
<span class="sd">        that will be mapped to a colormap.</span>

<span class="sd">        If a symbol is selected and no symbol size given, then psxy will</span>
<span class="sd">        interpret the third column of the input data as symbol size. Symbols</span>
<span class="sd">        whose size is &lt;= 0 are skipped. If no symbols are specified then the</span>
<span class="sd">        symbol code (see *S* below) must be present as last column in the</span>
<span class="sd">        input. If *S* is not used, a line connecting the data points will be</span>
<span class="sd">        drawn instead. To explicitly close polygons, use *L*. Select a fill</span>
<span class="sd">        with *G*. If *G* is set, *W* will control whether the polygon outline</span>
<span class="sd">        is drawn or not. If a symbol is selected, *G* and *W* determines the</span>
<span class="sd">        fill and outline/no outline, respectively.</span>

<span class="sd">        Full option list at :gmt-docs:`plot.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x, y : float or 1d arrays</span>
<span class="sd">            The x and y coordinates, or arrays of x and y coordinates of the</span>
<span class="sd">            data points</span>
<span class="sd">        data : str or 2d array</span>
<span class="sd">            Either a data file name or a 2d numpy array with the tabular data.</span>
<span class="sd">            Use option *columns* (i) to choose which columns are x, y, color,</span>
<span class="sd">            and size, respectively.</span>
<span class="sd">        sizes : 1d array</span>
<span class="sd">            The sizes of the data points in units specified in *style* (S).</span>
<span class="sd">            Only valid if using *x* and *y*.</span>
<span class="sd">        direction : list of two 1d arrays</span>
<span class="sd">            If plotting vectors (using ``style=&#39;V&#39;`` or ``style=&#39;v&#39;``), then</span>
<span class="sd">            should be a list of two 1d arrays with the vector directions. These</span>
<span class="sd">            can be angle and length, azimuth and length, or x and y components,</span>
<span class="sd">            depending on the style options chosen.</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        A : bool or str</span>
<span class="sd">            ``&#39;[m|p|x|y]&#39;``</span>
<span class="sd">            By default, geographic line segments are drawn as great circle</span>
<span class="sd">            arcs. To draw them as straight lines, use *A*.</span>
<span class="sd">        {B}</span>
<span class="sd">        {CPT}</span>
<span class="sd">        D : str</span>
<span class="sd">            ``&#39;dx/dy&#39;``: Offset the plot symbol or line locations by the given</span>
<span class="sd">            amounts dx/dy.</span>
<span class="sd">        E : bool or str</span>
<span class="sd">            ``&#39;[x|y|X|Y][+a][+cl|f][+n][+wcap][+ppen]&#39;``.</span>
<span class="sd">            Draw symmetrical error bars.</span>
<span class="sd">        {G}</span>
<span class="sd">        S : str</span>
<span class="sd">            Plot symbols (including vectors, pie slices, fronts, decorated or</span>
<span class="sd">            quoted lines).</span>
<span class="sd">        {W}</span>
<span class="sd">        {U}</span>
<span class="sd">        l : str</span>
<span class="sd">            Add a legend entry for the symbol or line being plotted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">extra_arrays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s2">&quot;S&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;vV&quot;</span> <span class="ow">and</span> <span class="n">direction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;G&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">!=</span> <span class="s2">&quot;vectors&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                    <span class="s2">&quot;Can&#39;t use arrays for color if data is matrix or file.&quot;</span>
                <span class="p">)</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">sizes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">!=</span> <span class="s2">&quot;vectors&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span>
                    <span class="s2">&quot;Can&#39;t use arrays for sizes if data is matrix or file.&quot;</span>
                <span class="p">)</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sizes</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="c1"># Choose how data will be passed in to the module</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">dummy_context</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;matrix&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_matrix</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;vectors&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_vectors</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="o">*</span><span class="n">extra_arrays</span>
                <span class="p">)</span>

            <span class="k">with</span> <span class="n">file_context</span> <span class="k">as</span> <span class="n">fname</span><span class="p">:</span>
                <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fname</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
                <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span>
        <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
        <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
        <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
        <span class="n">S</span><span class="o">=</span><span class="s2">&quot;skip&quot;</span><span class="p">,</span>
        <span class="n">G</span><span class="o">=</span><span class="s2">&quot;label_placement&quot;</span><span class="p">,</span>
        <span class="n">W</span><span class="o">=</span><span class="s2">&quot;pen&quot;</span><span class="p">,</span>
        <span class="n">L</span><span class="o">=</span><span class="s2">&quot;triangular_mesh_pen&quot;</span><span class="p">,</span>
        <span class="n">i</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">,</span>
        <span class="n">C</span><span class="o">=</span><span class="s2">&quot;levels&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">contour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Contour table data by direct triangulation.</span>

<span class="sd">        Takes a matrix, (x,y,z) pairs, or a file name as input and plots lines,</span>
<span class="sd">        polygons, or symbols at those locations on a map.</span>

<span class="sd">        Must provide either *data* or *x*, *y*, and *z*.</span>

<span class="sd">        [TODO: Insert more documentation]</span>

<span class="sd">        Full option list at :gmt-docs:`contour.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x, y, z : 1d arrays</span>
<span class="sd">            Arrays of x and y coordinates and values z of the data points.</span>
<span class="sd">        data : str or 2d array</span>
<span class="sd">            Either a data file name or a 2d numpy array with the tabular data.</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        A : bool or str</span>
<span class="sd">            ``&#39;[m|p|x|y]&#39;``</span>
<span class="sd">            By default, geographic line segments are drawn as great circle</span>
<span class="sd">            arcs. To draw them as straight lines, use *A*.</span>
<span class="sd">        {B}</span>
<span class="sd">        C : Contour file or level(s)</span>
<span class="sd">        D : Dump contour coordinates</span>
<span class="sd">        E : Network information</span>
<span class="sd">        G : Placement of labels</span>
<span class="sd">        I : Color the triangles using CPT</span>
<span class="sd">        L : Pen to draw the underlying triangulation (default none)</span>
<span class="sd">        N : Do not clip contours</span>
<span class="sd">        Q : Minimum contour length</span>
<span class="sd">            ``&#39;[p|t]&#39;``</span>
<span class="sd">        S : Skip input points outside region</span>
<span class="sd">            ``&#39;[p|t]&#39;``</span>
<span class="sd">        {W}</span>
<span class="sd">        X : Origin shift x</span>
<span class="sd">        Y : Origin shift y</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;vectors&quot;</span> <span class="ow">and</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;Must provided both x, y, and z.&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="c1"># Choose how data will be passed in to the module</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">dummy_context</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;matrix&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_matrix</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;vectors&quot;</span><span class="p">:</span>
                <span class="n">file_context</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_from_vectors</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

            <span class="k">with</span> <span class="n">file_context</span> <span class="k">as</span> <span class="n">fname</span><span class="p">:</span>
                <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fname</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
                <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;contour&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">basemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Produce a basemap for the figure.</span>

<span class="sd">        Several map projections are available, and the user may specify</span>
<span class="sd">        separate tick-mark intervals for boundary annotation, ticking, and</span>
<span class="sd">        [optionally] gridlines. A simple map scale or directional rose may also</span>
<span class="sd">        be plotted.</span>

<span class="sd">        At least one of the options *B*, *L*, or *T* must be specified.</span>

<span class="sd">        Full option list at :gmt-docs:`basemap.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        {B}</span>
<span class="sd">        L : str</span>
<span class="sd">            ``&#39;[g|j|J|n|x]refpoint&#39;``</span>
<span class="sd">            Draws a simple map scale centered on the reference point specified.</span>
<span class="sd">        Td : str</span>
<span class="sd">            Draws a map directional rose on the map at the location defined by</span>
<span class="sd">            the reference and anchor points.</span>
<span class="sd">        Tm : str</span>
<span class="sd">            Draws a map magnetic rose on the map at the location defined by the</span>
<span class="sd">            reference and anchor points</span>
<span class="sd">        {U}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s2">&quot;B&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="s2">&quot;L&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="s2">&quot;T&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;At least one of B, L, or T must be specified.&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;basemap&quot;</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">logo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Place the GMT graphics logo on a map.</span>

<span class="sd">        By default, the GMT logo is 2 inches wide and 1 inch high and</span>
<span class="sd">        will be positioned relative to the current plot origin.</span>
<span class="sd">        Use various options to change this and to place a transparent or</span>
<span class="sd">        opaque rectangular map panel behind the GMT logo.</span>

<span class="sd">        Full option list at :gmt-docs:`logo.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        D : str</span>
<span class="sd">            ``&#39;[g|j|J|n|x]refpoint+wwidth[+jjustify][+odx[/dy]]&#39;``.</span>
<span class="sd">            Sets reference point on the map for the image.</span>
<span class="sd">        F : bool or str</span>
<span class="sd">            Without further options, draws a rectangular border around the</span>
<span class="sd">            GMT logo.</span>
<span class="sd">        {U}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;D&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;Option D must be specified.&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;logo&quot;</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imagefile</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Place images or EPS files on maps.</span>

<span class="sd">        Reads an Encapsulated PostScript file or a raster image file and plots</span>
<span class="sd">        it on a map.</span>

<span class="sd">        Full option list at :gmt-docs:`image.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        D: str</span>
<span class="sd">            ``&#39;[g|j|J|n|x]refpoint+rdpi+w[-]width[/height][+jjustify]</span>
<span class="sd">            [+nnx[/ny]][+odx[/dy]]&#39;`` Sets reference point on the map for the</span>
<span class="sd">            image.</span>
<span class="sd">        F : bool or str</span>
<span class="sd">            ``&#39;[+cclearances][+gfill][+i[[gap/]pen]][+p[pen]][+r[radius]]</span>
<span class="sd">            [+s[[dx/dy/][shade]]]&#39;`` Without further options, draws a</span>
<span class="sd">            rectangular border around the image using **MAP_FRAME_PEN**.</span>
<span class="sd">        M : bool</span>
<span class="sd">            Convert color image to monochrome grayshades using the (television)</span>
<span class="sd">            YIQ-transformation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">imagefile</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="s2">&quot;box&quot;</span><span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;JTR+jTR+o0.2c&quot;</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="s2">&quot;+gwhite+p1p&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot legends on maps.</span>

<span class="sd">        Makes legends that can be overlaid on maps. Reads specific</span>
<span class="sd">        legend-related information from an input file, or automatically creates</span>
<span class="sd">        legend entries from plotted symbols that have labels. Unless otherwise</span>
<span class="sd">        noted, annotations will be made using the primary annotation font and</span>
<span class="sd">        size in effect (i.e., FONT_ANNOT_PRIMARY).</span>

<span class="sd">        Full option list at :gmt-docs:`legend.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        spec : None or str</span>
<span class="sd">            Either None (default) for using the automatically generated legend</span>
<span class="sd">            specification file, or a filename pointing to the legend</span>
<span class="sd">            specification file.</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        position (D) : str</span>
<span class="sd">            ``&#39;[g|j|J|n|x]refpoint+wwidth[/height][+jjustify][+lspacing]</span>
<span class="sd">            [+odx[/dy]]&#39;`` Defines the reference point on the map for the</span>
<span class="sd">            legend. By default, uses &#39;JTR+jTR+o0.2c&#39; which places the legend at</span>
<span class="sd">            the top-right corner inside the map frame, with a 0.2 cm offset.</span>
<span class="sd">        box (F) : bool or str</span>
<span class="sd">            ``&#39;[+cclearances][+gfill][+i[[gap/]pen]][+p[pen]][+r[radius]]</span>
<span class="sd">            [+s[[dx/dy/][shade]]]&#39;`` Without further options, draws a</span>
<span class="sd">            rectangular border around the legend using **MAP_FRAME_PEN**. By</span>
<span class="sd">            default, uses &#39;+gwhite+p1p&#39; which draws a box around the legend</span>
<span class="sd">            using a 1 point black pen and adds a white background.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;D&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;D&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>

            <span class="k">if</span> <span class="s2">&quot;F&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">box</span>

        <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">spec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">specfile</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">elif</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                <span class="n">specfile</span> <span class="o">=</span> <span class="n">spec</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;Unrecognized data type: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">spec</span><span class="p">)))</span>
            <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">specfile</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>

    <span class="nd">@fmt_docstring</span>
    <span class="nd">@use_alias</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">)</span>
    <span class="nd">@kwargs_to_strings</span><span class="p">(</span>
        <span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
        <span class="n">textfiles</span><span class="o">=</span><span class="s2">&quot;sequence_space&quot;</span><span class="p">,</span>
        <span class="n">angle</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">,</span>
        <span class="n">font</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">,</span>
        <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">textfiles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">angle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">justify</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot or typeset text on maps</span>

<span class="sd">        Used to be pstext.</span>

<span class="sd">        Takes in textfile(s) or (x,y,text) triples as input.</span>

<span class="sd">        Must provide at least *textfiles* or *x*, *y*, and *text*.</span>

<span class="sd">        Full option list at :gmt-docs:`text.html`</span>

<span class="sd">        {aliases}</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        textfiles : str or list</span>
<span class="sd">            A text data file name, or a list of filenames containing 1 or more</span>
<span class="sd">            records with (x, y[, font, angle, justify], text).</span>
<span class="sd">        x, y : float or 1d arrays</span>
<span class="sd">            The x and y coordinates, or an array of x and y coordinates to plot</span>
<span class="sd">            the text</span>
<span class="sd">        text : str or 1d array</span>
<span class="sd">            The text string, or an array of strings to plot on the figure</span>
<span class="sd">        angle: int/float or bool</span>
<span class="sd">            Set the angle measured in degrees counter-clockwise from</span>
<span class="sd">            horizontal. E.g. 30 sets the text at 30 degrees. If no angle is</span>
<span class="sd">            given then the input textfile(s) must have this as a column.</span>
<span class="sd">        font : str or bool</span>
<span class="sd">            Set the font specification with format &quot;size,font,color&quot; where size</span>
<span class="sd">            is text size in points, font is the font to use, and color sets the</span>
<span class="sd">            font color. E.g. &quot;12p,Helvetica-Bold,red&quot; selects a 12p red</span>
<span class="sd">            Helvetica-Bold font. If no font info is given then the input</span>
<span class="sd">            textfile(s) must have this information in one of its columns.</span>
<span class="sd">        justify: str or bool</span>
<span class="sd">            Set the alignment which refers to the part of the text string that</span>
<span class="sd">            will be mapped onto the (x,y) point. Choose a 2 character</span>
<span class="sd">            combination of L, C, R (for left, center, or right) and T, M, B for</span>
<span class="sd">            top, middle, or bottom. E.g., BL for lower left. If no</span>
<span class="sd">            justification is given then the input textfile(s) must have this as</span>
<span class="sd">            a column.</span>
<span class="sd">        {J}</span>
<span class="sd">        {R}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">textfiles</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;vectors&quot;</span> <span class="ow">and</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="s2">&quot;Must provide text with x and y.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">textfile</span> <span class="ow">in</span> <span class="n">textfiles</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">):</span>  <span class="c1"># ensure that textfile(s) exist</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">textfile</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot find the file: </span><span class="si">{</span><span class="n">textfile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">angle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">font</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">justify</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;F&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;F&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">})</span>
            <span class="k">if</span> <span class="n">angle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;+a</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">font</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">font</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;+f</span><span class="si">{</span><span class="n">font</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">justify</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">justify</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;+j</span><span class="si">{</span><span class="n">justify</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">with</span> <span class="n">GMTTempFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tmpfile</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                    <span class="n">fname</span> <span class="o">=</span> <span class="n">textfiles</span>
                <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;vectors&quot;</span><span class="p">:</span>
                    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
                            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">y</span><span class="p">),</span>
                            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">text</span><span class="p">),</span>
                        <span class="p">}</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
                        <span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONE</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">fname</span> <span class="o">=</span> <span class="n">tmpfile</span><span class="o">.</span><span class="n">name</span>

                <span class="n">arg_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fname</span><span class="p">,</span> <span class="n">build_arg_string</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)])</span>
                <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">arg_str</span><span class="p">)</span>
</pre></div>

           </div>
           
          </div>
          
<footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2020, The PyGMT Developers.
      
        <span class="commit">
          Revision <code><a href="https://github.com/GenericMappingTools/pygmt/commit/74501e01de098708d466c560d68263f3f698e143">74501e0</a></code>.
        </span>
      

    </p>
  </div>
<p>
Built with <a href="http://sphinx-doc.org/">Sphinx</a>
using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
provided by <a href="https://readthedocs.org">Read the Docs</a>
</p>
<p>
This website uses Google Analytics to gather usage statistics.
However, it does not use cookies or track you across different websites.
Page view data are used to help us improve the site and provide an estimate of the
software usage.
</p>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>