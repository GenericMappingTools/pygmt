
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>pygmt.src.plot3d &mdash; PyGMT</title>
    

      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../_static/style.css?v=845ca4e4" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
    <link rel="canonical" href="https://pygmt.org//latest/_modules/pygmt/src/plot3d.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=44bdc989"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=ccdb6887"></script>
        <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <!-- Google Analytics tracking code -->
    <!-- See https://developers.google.com/analytics/devguides/collection/analyticsjs/ for documentation. -->
    <!-- 'storage': 'none' disables cookies -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-38125837-7', 'auto', {'storage': 'none'});
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>

    <!-- Documentation switcher -->
    <!-- Point to the *dev* version switcher. This will allow the latest versions to appear on older documentation. -->
    <script type="text/javascript" src="/dev/_static/version_switch.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href="../../../index.html"><h2 class="sidebar-title">PyGMT</h2></a>

    
        
        
            <div class="version">
                v0.15.0
            </div>
        
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Intro to PyGMT</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projections/index.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../external_resources.html">External Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../techref/index.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../minversions.html">Minimum Supported Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem.html">Ecosystem</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../team.html">PyGMT Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintenance.html">Maintainers Guide</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Getting help and contributing</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/.github/blob/main/CODE_OF_CONDUCT.md"><i class="fa fa-gavel fa-fw"></i> Code of Conduct</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt/blob/main/LICENSE.txt"><i class="fa fa-book fa-fw"></i> License</a></li>
            
                <li class="toctree-l1"><a href="https://forum.generic-mapping-tools.org"><i class="fa fa-comment fa-fw"></i> Contact</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/GenericMappingTools/pygmt"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">PyGMT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
<div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">pygmt.src.plot3d</li>
    <li class="source-link">
        
    </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pygmt.src.plot3d</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">plot3d - Plot lines, polygons, and symbols in 3-D.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt.clib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">GMTInvalidInput</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">build_arg_list</span><span class="p">,</span>
    <span class="n">data_kind</span><span class="p">,</span>
    <span class="n">fmt_docstring</span><span class="p">,</span>
    <span class="n">is_nonstr_iter</span><span class="p">,</span>
    <span class="n">kwargs_to_strings</span><span class="p">,</span>
    <span class="n">use_alias</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pygmt.src._common</span><span class="w"> </span><span class="kn">import</span> <span class="n">_data_geometry_is_point</span>


<span class="nd">@fmt_docstring</span>
<span class="nd">@use_alias</span><span class="p">(</span>
    <span class="n">A</span><span class="o">=</span><span class="s2">&quot;straight_line&quot;</span><span class="p">,</span>
    <span class="n">B</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span>
    <span class="n">C</span><span class="o">=</span><span class="s2">&quot;cmap&quot;</span><span class="p">,</span>
    <span class="n">D</span><span class="o">=</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span>
    <span class="n">G</span><span class="o">=</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span>
    <span class="n">I</span><span class="o">=</span><span class="s2">&quot;intensity&quot;</span><span class="p">,</span>
    <span class="n">J</span><span class="o">=</span><span class="s2">&quot;projection&quot;</span><span class="p">,</span>
    <span class="n">Jz</span><span class="o">=</span><span class="s2">&quot;zscale&quot;</span><span class="p">,</span>
    <span class="n">JZ</span><span class="o">=</span><span class="s2">&quot;zsize&quot;</span><span class="p">,</span>
    <span class="n">L</span><span class="o">=</span><span class="s2">&quot;close&quot;</span><span class="p">,</span>
    <span class="n">N</span><span class="o">=</span><span class="s2">&quot;no_clip&quot;</span><span class="p">,</span>
    <span class="n">Q</span><span class="o">=</span><span class="s2">&quot;no_sort&quot;</span><span class="p">,</span>
    <span class="n">R</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span>
    <span class="n">S</span><span class="o">=</span><span class="s2">&quot;style&quot;</span><span class="p">,</span>
    <span class="n">V</span><span class="o">=</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span>
    <span class="n">W</span><span class="o">=</span><span class="s2">&quot;pen&quot;</span><span class="p">,</span>
    <span class="n">Z</span><span class="o">=</span><span class="s2">&quot;zvalue&quot;</span><span class="p">,</span>
    <span class="n">a</span><span class="o">=</span><span class="s2">&quot;aspatial&quot;</span><span class="p">,</span>
    <span class="n">b</span><span class="o">=</span><span class="s2">&quot;binary&quot;</span><span class="p">,</span>
    <span class="n">c</span><span class="o">=</span><span class="s2">&quot;panel&quot;</span><span class="p">,</span>
    <span class="n">d</span><span class="o">=</span><span class="s2">&quot;nodata&quot;</span><span class="p">,</span>
    <span class="n">e</span><span class="o">=</span><span class="s2">&quot;find&quot;</span><span class="p">,</span>
    <span class="n">f</span><span class="o">=</span><span class="s2">&quot;coltypes&quot;</span><span class="p">,</span>
    <span class="n">g</span><span class="o">=</span><span class="s2">&quot;gap&quot;</span><span class="p">,</span>
    <span class="n">h</span><span class="o">=</span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
    <span class="n">i</span><span class="o">=</span><span class="s2">&quot;incols&quot;</span><span class="p">,</span>
    <span class="n">l</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">,</span>
    <span class="n">p</span><span class="o">=</span><span class="s2">&quot;perspective&quot;</span><span class="p">,</span>
    <span class="n">t</span><span class="o">=</span><span class="s2">&quot;transparency&quot;</span><span class="p">,</span>
    <span class="n">w</span><span class="o">=</span><span class="s2">&quot;wrap&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@kwargs_to_strings</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="s2">&quot;sequence_comma&quot;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">plot3d</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">symbol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">straight_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># noqa: ARG001</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot lines, polygons, and symbols in 3-D.</span>

<span class="sd">    Takes a matrix, (x, y, z) triplets, or a file name as input and plots</span>
<span class="sd">    lines, polygons, or symbols at those locations in 3-D.</span>

<span class="sd">    Must provide either ``data`` or ``x``, ``y``, and ``z``.</span>

<span class="sd">    If providing data through ``x``, ``y``, and ``z``, ``fill`` can be a</span>
<span class="sd">    1-D array that will be mapped to a colormap.</span>

<span class="sd">    If a symbol is selected and no symbol size given, then plot3d will</span>
<span class="sd">    interpret the fourth column of the input data as symbol size. Symbols</span>
<span class="sd">    whose size is &lt;= 0 are skipped. If no symbols are specified then the</span>
<span class="sd">    symbol code (see ``style`` below) must be present as last column in the</span>
<span class="sd">    input. If ``style`` is not used, a line connecting the data points will</span>
<span class="sd">    be drawn instead. To explicitly close polygons, use ``close``. Select a</span>
<span class="sd">    fill with ``fill``. If ``fill`` is set, ``pen`` will control whether the</span>
<span class="sd">    polygon outline is drawn or not. If a symbol is selected, ``fill`` and</span>
<span class="sd">    ``pen`` determine the fill and outline/no outline, respectively.</span>

<span class="sd">    Full option list at :gmt-docs:`plot3d.html`</span>

<span class="sd">    {aliases}</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : str, {table-like}</span>
<span class="sd">        Either a data file name, a 2-D {table-classes}.</span>
<span class="sd">        Optionally, use parameter ``incols`` to specify which columns are x, y,</span>
<span class="sd">        z, fill, and size, respectively.</span>
<span class="sd">    x/y/z : float or 1-D arrays</span>
<span class="sd">        The x, y, and z coordinates, or arrays of x, y and z coordinates of</span>
<span class="sd">        the data points.</span>
<span class="sd">    size : 1-D array</span>
<span class="sd">        The size of the data points in units specified in ``style``.</span>
<span class="sd">        Only valid if using ``x``/``y``/``z``.</span>
<span class="sd">    symbol : 1-D array</span>
<span class="sd">        The symbols of the data points. Only valid if using ``x``/``y``.</span>
<span class="sd">    direction : list of two 1-D arrays</span>
<span class="sd">        If plotting vectors (using ``style=&quot;V&quot;`` or ``style=&quot;v&quot;``), then</span>
<span class="sd">        should be a list of two 1-D arrays with the vector directions. These</span>
<span class="sd">        can be angle and length, azimuth and length, or x and y components,</span>
<span class="sd">        depending on the style options chosen.</span>
<span class="sd">    {projection}</span>
<span class="sd">    zscale/zsize : float or str</span>
<span class="sd">        Set z-axis scaling or z-axis size.</span>
<span class="sd">    {region}</span>
<span class="sd">    straight_line</span>
<span class="sd">        By default, line segments are drawn as straight lines in the Cartesian and polar</span>
<span class="sd">        coordinate systems, and as great circle arcs (by resampling coarse input data</span>
<span class="sd">        along such arcs) in the geographic coordinate system. The ``straight_line``</span>
<span class="sd">        parameter can control the drawing of line segments. Valid values are:</span>

<span class="sd">        - ``True``: Draw line segments as straight lines in geographic coordinate</span>
<span class="sd">          systems.</span>
<span class="sd">        - ``&quot;x&quot;``: Draw line segments by first along *x*, then along *y*.</span>
<span class="sd">        - ``&quot;y&quot;``: Draw line segments by first along *y*, then along *x*.</span>

<span class="sd">        Here, *x* and *y* have different meanings depending on the coordinate system:</span>

<span class="sd">        - **Cartesian** coordinate system: *x* and *y* are the X- and Y-axes.</span>
<span class="sd">        - **Polar** coordinate system: *x* and *y* are theta and radius.</span>
<span class="sd">        - **Geographic** coordinate system: *x* and *y* are parallels and meridians.</span>

<span class="sd">        **NOTE**: The ``straight_line`` parameter requires constant *z*-coordinates.</span>

<span class="sd">        .. attention::</span>

<span class="sd">            There exits a bug in GMT&lt;=6.5.0 that, in geographic coordinate systems, the</span>
<span class="sd">            meaning of *x* and *y* is reversed, i.e., *x* means meridians and *y* means</span>
<span class="sd">            parallels. The bug is fixed by upstream</span>
<span class="sd">            `PR #8648 &lt;https://github.com/GenericMappingTools/gmt/pull/8648&gt;`__.</span>
<span class="sd">    {frame}</span>
<span class="sd">    {cmap}</span>
<span class="sd">    offset : str</span>
<span class="sd">        *dx*/*dy*\ [/*dz*].</span>
<span class="sd">        Offset the plot symbol or line locations by the given amounts</span>
<span class="sd">        *dx*/*dy*\ [/*dz*] [Default is no offset].</span>
<span class="sd">    {fill}</span>
<span class="sd">        *fill* can be a 1-D array, but it is only valid if using ``x``/``y``</span>
<span class="sd">        and ``cmap=True`` is also required.</span>
<span class="sd">    intensity : float, bool, or 1-D array</span>
<span class="sd">        Provide an *intensity* value (nominally in the -1 to +1 range) to</span>
<span class="sd">        modulate the fill color by simulating illumination. If using</span>
<span class="sd">        ``intensity=True``, we will instead read *intensity* from the first</span>
<span class="sd">        data column after the symbol parameters (if given). *intensity* can</span>
<span class="sd">        also be a 1-D array to set varying intensity for symbols, but it is</span>
<span class="sd">        only valid for ``x``/``y``/``z``.</span>

<span class="sd">    close : str</span>
<span class="sd">        [**+b**\|\ **d**\|\ **D**][**+xl**\|\ **r**\|\ *x0*]\</span>
<span class="sd">        [**+yl**\|\ **r**\|\ *y0*][**+p**\ *pen*].</span>
<span class="sd">        Force closed polygons. Full documentation is at</span>
<span class="sd">        :gmt-docs:`plot3d.html#l`.</span>
<span class="sd">    no_clip : bool or str</span>
<span class="sd">        [**c**\|\ **r**].</span>
<span class="sd">        Do **not** clip symbols that fall outside the frame boundaries</span>
<span class="sd">        [Default plots points whose coordinates are strictly inside the</span>
<span class="sd">        frame boundaries only].</span>
<span class="sd">        This parameter does not apply to lines and polygons which are always</span>
<span class="sd">        clipped to the map region. For periodic (360° longitude) maps we</span>
<span class="sd">        must plot all symbols twice in case they are clipped by the</span>
<span class="sd">        repeating boundary. ``no_clip=True`` will turn off clipping and not</span>
<span class="sd">        plot repeating symbols. Use ``no_clip=&quot;r&quot;`` to turn off clipping</span>
<span class="sd">        but retain the plotting of such repeating symbols, or use</span>
<span class="sd">        ``no_clip=&quot;c&quot;`` to retain clipping but turn off plotting of</span>
<span class="sd">        repeating symbols.</span>
<span class="sd">    no_sort : bool</span>
<span class="sd">        Turn off the automatic sorting of items based on their distance</span>
<span class="sd">        from the viewer. The default is to sort the items so that items in</span>
<span class="sd">        the foreground are plotted after items in the background.</span>
<span class="sd">    style : str</span>
<span class="sd">        Plot symbols. Full documentation is at :gmt-docs:`plot3d.html#s`.</span>
<span class="sd">    {verbose}</span>
<span class="sd">    {pen}</span>
<span class="sd">    zvalue : str</span>
<span class="sd">        *value*\|\ *file*.</span>
<span class="sd">        Instead of specifying a symbol or polygon fill and outline color</span>
<span class="sd">        via ``fill`` and ``pen``, give both a *value* via **zvalue** and a</span>
<span class="sd">        color lookup table via ``cmap``.  Alternatively, give the name of a</span>
<span class="sd">        *file* with one z-value (read from the last column) for each</span>
<span class="sd">        polygon in the input data. To apply it to the fill color, use</span>
<span class="sd">        ``fill=&quot;+z&quot;``. To apply it to the pen color, append **+z** to</span>
<span class="sd">        ``pen``.</span>
<span class="sd">    {aspatial}</span>
<span class="sd">    {binary}</span>
<span class="sd">    {panel}</span>
<span class="sd">    {nodata}</span>
<span class="sd">    {find}</span>
<span class="sd">    {coltypes}</span>
<span class="sd">    {gap}</span>
<span class="sd">    {header}</span>
<span class="sd">    {incols}</span>
<span class="sd">    {label}</span>
<span class="sd">    {perspective}</span>
<span class="sd">    {transparency}</span>
<span class="sd">        ``transparency`` can also be a 1-D array to set varying</span>
<span class="sd">        transparency for symbols, but this option is only valid if using</span>
<span class="sd">        ``x``/``y``/``z``.</span>
<span class="sd">    {wrap}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO(GMT&gt;6.5.0): Remove the note for the upstream bug of the &quot;straight_line&quot;</span>
    <span class="c1"># parameter.</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">kind</span> <span class="o">=</span> <span class="n">data_kind</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">extra_arrays</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>  <span class="c1"># Add more columns for vectors input</span>
        <span class="c1"># Parameters for vector styles</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;vV&quot;</span>
            <span class="ow">and</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
        <span class="c1"># Fill</span>
        <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">)):</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">))</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">]</span>
        <span class="c1"># Size</span>
        <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
        <span class="c1"># Intensity and transparency</span>
        <span class="k">for</span> <span class="n">flag</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">flag</span><span class="p">)):</span>
                <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">flag</span><span class="p">))</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">flag</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># Symbol must be at the last column</span>
        <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">symbol</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;S&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">extra_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="p">(</span><span class="s2">&quot;direction&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;intensity&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s2">&quot;transparency&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">symbol</span><span class="p">),</span>
        <span class="p">]:</span>
            <span class="k">if</span> <span class="n">is_nonstr_iter</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; can&#39;t be a 1-D array if &#39;data&#39; is used.&quot;</span>
                <span class="k">raise</span> <span class="n">GMTInvalidInput</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Set the default style if data has a geometry of Point or MultiPoint</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">_data_geometry_is_point</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">kind</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;u0.2c&quot;</span>

    <span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">lib</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">lib</span><span class="o">.</span><span class="n">virtualfile_in</span><span class="p">(</span>
            <span class="n">check_kind</span><span class="o">=</span><span class="s2">&quot;vector&quot;</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
            <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span>
            <span class="n">extra_arrays</span><span class="o">=</span><span class="n">extra_arrays</span><span class="p">,</span>
            <span class="n">required_z</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">vintbl</span><span class="p">:</span>
            <span class="n">lib</span><span class="o">.</span><span class="n">call_module</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="s2">&quot;plot3d&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">build_arg_list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">infile</span><span class="o">=</span><span class="n">vintbl</span><span class="p">))</span>
</pre></div>

           </div>
          </div>
          
<footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2025, The PyGMT Developers.
      <span class="commit">Revision <code><a href="https://github.com/GenericMappingTools/pygmt/releases/tag/v0.15.0">v0.15.0</a></code>.
      </span>
      <span class="lastupdated">Last updated on Mar 31, 2025.
      </span></p>
  </div>

  
<p>
Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
provided by <a href="https://readthedocs.org">Read the Docs</a>
</p>
<p>
This website uses Google Analytics to gather usage statistics.
However, it does not use cookies or track you across different websites.
Page view data are used to help us improve the site and provide an estimate of the
software usage.
</p>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>